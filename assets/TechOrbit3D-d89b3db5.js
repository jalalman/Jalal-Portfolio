import{J as Mn,K as Rn,O as On,Q as Gn,X as Ln,g as xt,C as zr,V as jr,Y as cn,T as Pn,h as Yt,Z as Bn,_ as In,$ as Nn,r as Jt,a0 as Wn,a1 as jn,j as zn,a2 as Vn,z as _t,a3 as St,s as _e,u as Hn,a4 as hn,v as _r,a5 as gt,x as Me,t as Xn}from"./index-e8abcda1.js";const Yn=l=>typeof l=="object"&&typeof l.then=="function",Lr=[];function Jn(l,t,d=(h,r)=>h===r){if(l===t)return!0;if(!l||!t)return!1;const h=l.length;if(t.length!==h)return!1;for(let r=0;r<h;r++)if(!d(l[r],t[r]))return!1;return!0}function Kn(l,t=null,d=!1,h={}){t===null&&(t=[l]);for(const e of Lr)if(Jn(t,e.keys,e.equal)){if(d)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return h.lifespan&&h.lifespan>0&&(e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(e.remove,h.lifespan)),e.response;if(!d)throw e.promise}const r={keys:t,equal:h.equal,remove:()=>{const e=Lr.indexOf(r);e!==-1&&Lr.splice(e,1)},promise:(Yn(l)?l:l(...t)).then(e=>{r.response=e,h.lifespan&&h.lifespan>0&&(r.timeout=setTimeout(r.remove,h.lifespan))}).catch(e=>r.error=e)};if(Lr.push(r),!d)throw r.promise}const Qn=(l,t,d)=>Kn(l,t,!1,d);function Zn(){var l=Object.create(null);function t(r,e){var a=r.id,i=r.name,n=r.dependencies;n===void 0&&(n=[]);var o=r.init;o===void 0&&(o=function(){});var s=r.getTransferables;if(s===void 0&&(s=null),!l[a])try{n=n.map(function(u){return u&&u.isWorkerModule&&(t(u,function(c){if(c instanceof Error)throw c}),u=l[u.id].value),u}),o=h("<"+i+">.init",o),s&&(s=h("<"+i+">.getTransferables",s));var f=null;typeof o=="function"?f=o.apply(void 0,n):console.error("worker module init function failed to rehydrate"),l[a]={id:a,value:f,getTransferables:s},e(f)}catch(u){u&&u.noLog||console.error(u),e(u)}}function d(r,e){var a,i=r.id,n=r.args;(!l[i]||typeof l[i].value!="function")&&e(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var o=(a=l[i]).value.apply(a,n);o&&typeof o.then=="function"?o.then(s,function(f){return e(f instanceof Error?f:new Error(""+f))}):s(o)}catch(f){e(f)}function s(f){try{var u=l[i].getTransferables&&l[i].getTransferables(f);(!u||!Array.isArray(u)||!u.length)&&(u=void 0),e(f,u)}catch(c){console.error(c),e(c)}}}function h(r,e){var a=void 0;self.troikaDefine=function(n){return a=n};var i=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(i)}catch(n){console.error(n)}return URL.revokeObjectURL(i),delete self.troikaDefine,a}self.addEventListener("message",function(r){var e=r.data,a=e.messageId,i=e.action,n=e.data;try{i==="registerModule"&&t(n,function(o){o instanceof Error?postMessage({messageId:a,success:!1,error:o.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof o=="function"}})}),i==="callModule"&&d(n,function(o,s){o instanceof Error?postMessage({messageId:a,success:!1,error:o.message}):postMessage({messageId:a,success:!0,result:o},s||void 0)})}catch(o){postMessage({messageId:a,success:!1,error:o.stack})}})}function qn(l){var t=function(){for(var d=[],h=arguments.length;h--;)d[h]=arguments[h];return t._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,d);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var d=l.dependencies,h=l.init;d=Array.isArray(d)?d.map(function(e){return e&&(e=e.onMainThread||e,e._getInitResult&&(e=e._getInitResult())),e}):[];var r=Promise.all(d).then(function(e){return h.apply(null,e)});return t._getInitResult=function(){return r},r},t}var dn=function(){var l=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),l=!0}catch(d){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+d.message+"]")}return dn=function(){return l},l},$n=0,ea=0,ct=!1,Ur=Object.create(null),xr=Object.create(null),mt=Object.create(null);function fr(l){if((!l||typeof l.init!="function")&&!ct)throw new Error("requires `options.init` function");var t=l.dependencies,d=l.init,h=l.getTransferables,r=l.workerId,e=qn(l);r==null&&(r="#default");var a="workerModule"+ ++$n,i=l.name||a,n=null;t=t&&t.map(function(s){return typeof s=="function"&&!s.workerModuleData&&(ct=!0,s=fr({workerId:r,name:"<"+i+"> function dependency: "+s.name,init:`function(){return (
`+Ir(s)+`
)}`}),ct=!1),s&&s.workerModuleData&&(s=s.workerModuleData),s});function o(){for(var s=[],f=arguments.length;f--;)s[f]=arguments[f];if(!dn())return e.apply(void 0,s);if(!n){n=Kt(r,"registerModule",o.workerModuleData);var u=function(){n=null,xr[r].delete(u)};(xr[r]||(xr[r]=new Set)).add(u)}return n.then(function(c){var p=c.isCallable;if(p)return Kt(r,"callModule",{id:a,args:s});throw new Error("Worker module function was called but `init` did not return a callable function")})}return o.workerModuleData={isWorkerModule:!0,id:a,name:i,dependencies:t,init:Ir(d),getTransferables:h&&Ir(h)},o.onMainThread=e,o}function ra(l){xr[l]&&xr[l].forEach(function(t){t()}),Ur[l]&&(Ur[l].terminate(),delete Ur[l])}function Ir(l){var t=l.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function ta(l){var t=Ur[l];if(!t){var d=Ir(Zn);t=Ur[l]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+l.replace(/\*/g,"")+` **/

;(`+d+")()"],{type:"application/javascript"}))),t.onmessage=function(h){var r=h.data,e=r.messageId,a=mt[e];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete mt[e],a(r)}}return t}function Kt(l,t,d){return new Promise(function(h,r){var e=++ea;mt[e]=function(a){a.success?h(a.result):r(new Error("Error in worker "+t+" call: "+a.error))},ta(l).postMessage({messageId:e,action:t,data:d})})}function vn(){var l=function(t){function d(P,E,v,b,S,D,x,N){var A=1-x;N.x=A*A*P+2*A*x*v+x*x*S,N.y=A*A*E+2*A*x*b+x*x*D}function h(P,E,v,b,S,D,x,N,A,B){var X=1-A;B.x=X*X*X*P+3*X*X*A*v+3*X*A*A*S+A*A*A*x,B.y=X*X*X*E+3*X*X*A*b+3*X*A*A*D+A*A*A*N}function r(P,E){for(var v=/([MLQCZ])([^MLQCZ]*)/g,b,S,D,x,N;b=v.exec(P);){var A=b[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(B){return parseFloat(B)});switch(b[1]){case"M":x=S=A[0],N=D=A[1];break;case"L":(A[0]!==x||A[1]!==N)&&E("L",x,N,x=A[0],N=A[1]);break;case"Q":{E("Q",x,N,x=A[2],N=A[3],A[0],A[1]);break}case"C":{E("C",x,N,x=A[4],N=A[5],A[0],A[1],A[2],A[3]);break}case"Z":(x!==S||N!==D)&&E("L",x,N,S,D);break}}}function e(P,E,v){v===void 0&&(v=16);var b={x:0,y:0};r(P,function(S,D,x,N,A,B,X,$,H){switch(S){case"L":E(D,x,N,A);break;case"Q":{for(var j=D,pe=x,ue=1;ue<v;ue++)d(D,x,B,X,N,A,ue/(v-1),b),E(j,pe,b.x,b.y),j=b.x,pe=b.y;break}case"C":{for(var Q=D,ee=x,se=1;se<v;se++)h(D,x,B,X,$,H,N,A,se/(v-1),b),E(Q,ee,b.x,b.y),Q=b.x,ee=b.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",n=new WeakMap,o={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function s(P,E){var v=P.getContext?P.getContext("webgl",o):P,b=n.get(v);if(!b){let X=function(Q){var ee=D[Q];if(!ee&&(ee=D[Q]=v.getExtension(Q),!ee))throw new Error(Q+" not supported");return ee},$=function(Q,ee){var se=v.createShader(ee);return v.shaderSource(se,Q),v.compileShader(se),se},H=function(Q,ee,se,V){if(!x[Q]){var re={},q={},L=v.createProgram();v.attachShader(L,$(ee,v.VERTEX_SHADER)),v.attachShader(L,$(se,v.FRAGMENT_SHADER)),v.linkProgram(L),x[Q]={program:L,transaction:function(K){v.useProgram(L),K({setUniform:function(Y,be){for(var te=[],ae=arguments.length-2;ae-- >0;)te[ae]=arguments[ae+2];var le=q[be]||(q[be]=v.getUniformLocation(L,be));v["uniform"+Y].apply(v,[le].concat(te))},setAttribute:function(Y,be,te,ae,le){var de=re[Y];de||(de=re[Y]={buf:v.createBuffer(),loc:v.getAttribLocation(L,Y),data:null}),v.bindBuffer(v.ARRAY_BUFFER,de.buf),v.vertexAttribPointer(de.loc,be,v.FLOAT,!1,0,0),v.enableVertexAttribArray(de.loc),S?v.vertexAttribDivisor(de.loc,ae):X("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(de.loc,ae),le!==de.data&&(v.bufferData(v.ARRAY_BUFFER,le,te),de.data=le)}})}}}x[Q].transaction(V)},j=function(Q,ee){A++;try{v.activeTexture(v.TEXTURE0+A);var se=N[Q];se||(se=N[Q]=v.createTexture(),v.bindTexture(v.TEXTURE_2D,se),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST)),v.bindTexture(v.TEXTURE_2D,se),ee(se,A)}finally{A--}},pe=function(Q,ee,se){var V=v.createFramebuffer();B.push(V),v.bindFramebuffer(v.FRAMEBUFFER,V),v.activeTexture(v.TEXTURE0+ee),v.bindTexture(v.TEXTURE_2D,Q),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,Q,0);try{se(V)}finally{v.deleteFramebuffer(V),v.bindFramebuffer(v.FRAMEBUFFER,B[--B.length-1]||null)}},ue=function(){D={},x={},N={},A=-1,B.length=0};var S=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext,D={},x={},N={},A=-1,B=[];v.canvas.addEventListener("webglcontextlost",function(Q){ue(),Q.preventDefault()},!1),n.set(v,b={gl:v,isWebGL2:S,getExtension:X,withProgram:H,withTexture:j,withTextureFramebuffer:pe,handleContextLoss:ue})}E(b)}function f(P,E,v,b,S,D,x,N){x===void 0&&(x=15),N===void 0&&(N=null),s(P,function(A){var B=A.gl,X=A.withProgram,$=A.withTexture;$("copy",function(H,j){B.texImage2D(B.TEXTURE_2D,0,B.RGBA,S,D,0,B.RGBA,B.UNSIGNED_BYTE,E),X("copy",a,i,function(pe){var ue=pe.setUniform,Q=pe.setAttribute;Q("aUV",2,B.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ue("1i","image",j),B.bindFramebuffer(B.FRAMEBUFFER,N||null),B.disable(B.BLEND),B.colorMask(x&8,x&4,x&2,x&1),B.viewport(v,b,S,D),B.scissor(v,b,S,D),B.drawArrays(B.TRIANGLES,0,3)})})})}function u(P,E,v){var b=P.width,S=P.height;s(P,function(D){var x=D.gl,N=new Uint8Array(b*S*4);x.readPixels(0,0,b,S,x.RGBA,x.UNSIGNED_BYTE,N),P.width=E,P.height=v,f(x,N,0,0,b,S)})}var c=Object.freeze({__proto__:null,withWebGLContext:s,renderImageData:f,resizeWebGLCanvasWithoutClearing:u});function p(P,E,v,b,S,D){D===void 0&&(D=1);var x=new Uint8Array(P*E),N=b[2]-b[0],A=b[3]-b[1],B=[];e(v,function(Q,ee,se,V){B.push({x1:Q,y1:ee,x2:se,y2:V,minX:Math.min(Q,se),minY:Math.min(ee,V),maxX:Math.max(Q,se),maxY:Math.max(ee,V)})}),B.sort(function(Q,ee){return Q.maxX-ee.maxX});for(var X=0;X<P;X++)for(var $=0;$<E;$++){var H=pe(b[0]+N*(X+.5)/P,b[1]+A*($+.5)/E),j=Math.pow(1-Math.abs(H)/S,D)/2;H<0&&(j=1-j),j=Math.max(0,Math.min(255,Math.round(j*255))),x[$*P+X]=j}return x;function pe(Q,ee){for(var se=1/0,V=1/0,re=B.length;re--;){var q=B[re];if(q.maxX+V<=Q)break;if(Q+V>q.minX&&ee-V<q.maxY&&ee+V>q.minY){var L=G(Q,ee,q.x1,q.y1,q.x2,q.y2);L<se&&(se=L,V=Math.sqrt(se))}}return ue(Q,ee)&&(V=-V),V}function ue(Q,ee){for(var se=0,V=B.length;V--;){var re=B[V];if(re.maxX<=Q)break;var q=re.y1>ee!=re.y2>ee&&Q<(re.x2-re.x1)*(ee-re.y1)/(re.y2-re.y1)+re.x1;q&&(se+=re.y1<re.y2?1:-1)}return se!==0}}function g(P,E,v,b,S,D,x,N,A,B){D===void 0&&(D=1),N===void 0&&(N=0),A===void 0&&(A=0),B===void 0&&(B=0),m(P,E,v,b,S,D,x,null,N,A,B)}function m(P,E,v,b,S,D,x,N,A,B,X){D===void 0&&(D=1),A===void 0&&(A=0),B===void 0&&(B=0),X===void 0&&(X=0);for(var $=p(P,E,v,b,S,D),H=new Uint8Array($.length*4),j=0;j<$.length;j++)H[j*4+X]=$[j];f(x,H,A,B,P,E,1<<3-X,N)}function G(P,E,v,b,S,D){var x=S-v,N=D-b,A=x*x+N*N,B=A?Math.max(0,Math.min(1,((P-v)*x+(E-b)*N)/A)):0,X=P-(v+B*x),$=E-(b+B*N);return X*X+$*$}var F=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:g,generateIntoFramebuffer:m}),k="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",U="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",w="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",O=new Float32Array([0,0,2,0,0,2]),_=null,C=!1,W={},M=new WeakMap;function J(P){if(!C&&!z(P))throw new Error("WebGL generation not supported")}function y(P,E,v,b,S,D,x){if(D===void 0&&(D=1),x===void 0&&(x=null),!x&&(x=_,!x)){var N=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!N)throw new Error("OffscreenCanvas or DOM canvas not supported");x=_=N.getContext("webgl",{depth:!1})}J(x);var A=new Uint8Array(P*E*4);s(x,function(H){var j=H.gl,pe=H.withTexture,ue=H.withTextureFramebuffer;pe("readable",function(Q,ee){j.texImage2D(j.TEXTURE_2D,0,j.RGBA,P,E,0,j.RGBA,j.UNSIGNED_BYTE,null),ue(Q,ee,function(se){T(P,E,v,b,S,D,j,se,0,0,0),j.readPixels(0,0,P,E,j.RGBA,j.UNSIGNED_BYTE,A)})})});for(var B=new Uint8Array(P*E),X=0,$=0;X<A.length;X+=4)B[$++]=A[X];return B}function R(P,E,v,b,S,D,x,N,A,B){D===void 0&&(D=1),N===void 0&&(N=0),A===void 0&&(A=0),B===void 0&&(B=0),T(P,E,v,b,S,D,x,null,N,A,B)}function T(P,E,v,b,S,D,x,N,A,B,X){D===void 0&&(D=1),A===void 0&&(A=0),B===void 0&&(B=0),X===void 0&&(X=0),J(x);var $=[];e(v,function(H,j,pe,ue){$.push(H,j,pe,ue)}),$=new Float32Array($),s(x,function(H){var j=H.gl,pe=H.isWebGL2,ue=H.getExtension,Q=H.withProgram,ee=H.withTexture,se=H.withTextureFramebuffer,V=H.handleContextLoss;if(ee("rawDistances",function(re,q){(P!==re._lastWidth||E!==re._lastHeight)&&j.texImage2D(j.TEXTURE_2D,0,j.RGBA,re._lastWidth=P,re._lastHeight=E,0,j.RGBA,j.UNSIGNED_BYTE,null),Q("main",k,U,function(L){var he=L.setAttribute,K=L.setUniform,ne=!pe&&ue("ANGLE_instanced_arrays"),Y=!pe&&ue("EXT_blend_minmax");he("aUV",2,j.STATIC_DRAW,0,O),he("aLineSegment",4,j.DYNAMIC_DRAW,1,$),K.apply(void 0,["4f","uGlyphBounds"].concat(b)),K("1f","uMaxDistance",S),K("1f","uExponent",D),se(re,q,function(be){j.enable(j.BLEND),j.colorMask(!0,!0,!0,!0),j.viewport(0,0,P,E),j.scissor(0,0,P,E),j.blendFunc(j.ONE,j.ONE),j.blendEquationSeparate(j.FUNC_ADD,pe?j.MAX:Y.MAX_EXT),j.clear(j.COLOR_BUFFER_BIT),pe?j.drawArraysInstanced(j.TRIANGLES,0,3,$.length/4):ne.drawArraysInstancedANGLE(j.TRIANGLES,0,3,$.length/4)})}),Q("post",a,w,function(L){L.setAttribute("aUV",2,j.STATIC_DRAW,0,O),L.setUniform("1i","tex",q),j.bindFramebuffer(j.FRAMEBUFFER,N),j.disable(j.BLEND),j.colorMask(X===0,X===1,X===2,X===3),j.viewport(A,B,P,E),j.scissor(A,B,P,E),j.drawArrays(j.TRIANGLES,0,3)})}),j.isContextLost())throw V(),new Error("webgl context lost")})}function z(P){var E=!P||P===_?W:P.canvas||P,v=M.get(E);if(v===void 0){C=!0;var b=null;try{var S=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],D=y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,P);v=D&&S.length===D.length&&D.every(function(x,N){return x===S[N]}),v||(b="bad trial run results",console.info(S,D))}catch(x){v=!1,b=x.message}b&&console.warn("WebGL SDF generation not supported:",b),C=!1,M.set(E,v)}return v}var I=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:R,generateIntoFramebuffer:T,isSupported:z});function Z(P,E,v,b,S,D){S===void 0&&(S=Math.max(b[2]-b[0],b[3]-b[1])/2),D===void 0&&(D=1);try{return y.apply(I,arguments)}catch(x){return console.info("WebGL SDF generation failed, falling back to JS",x),p.apply(F,arguments)}}function ie(P,E,v,b,S,D,x,N,A,B){S===void 0&&(S=Math.max(b[2]-b[0],b[3]-b[1])/2),D===void 0&&(D=1),N===void 0&&(N=0),A===void 0&&(A=0),B===void 0&&(B=0);try{return R.apply(I,arguments)}catch(X){return console.info("WebGL SDF generation failed, falling back to JS",X),g.apply(F,arguments)}}return t.forEachPathCommand=r,t.generate=Z,t.generateIntoCanvas=ie,t.javascript=F,t.pathToLineSegments=e,t.webgl=I,t.webglUtils=c,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return l}function na(){var l=function(t){var d={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},h={},r={};h.L=1,r[1]="L",Object.keys(d).forEach(function(V,re){h[V]=1<<re+1,r[h[V]]=V}),Object.freeze(h);var e=h.LRI|h.RLI|h.FSI,a=h.L|h.R|h.AL,i=h.B|h.S|h.WS|h.ON|h.FSI|h.LRI|h.RLI|h.PDI,n=h.BN|h.RLE|h.LRE|h.RLO|h.LRO|h.PDF,o=h.S|h.WS|h.B|e|h.PDI|n,s=null;function f(){if(!s){s=new Map;var V=function(q){if(d.hasOwnProperty(q)){var L=0;d[q].split(",").forEach(function(he){var K=he.split("+"),ne=K[0],Y=K[1];ne=parseInt(ne,36),Y=Y?parseInt(Y,36):0,s.set(L+=ne,h[q]);for(var be=0;be<Y;be++)s.set(++L,h[q])})}};for(var re in d)V(re)}}function u(V){return f(),s.get(V.codePointAt(0))||h.L}function c(V){return r[u(V)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(V,re){var q=36,L=0,he=new Map,K=re&&new Map,ne;return V.split(",").forEach(function Y(be){if(be.indexOf("+")!==-1)for(var te=+be;te--;)Y(ne);else{ne=be;var ae=be.split(">"),le=ae[0],de=ae[1];le=String.fromCodePoint(L+=parseInt(le,q)),de=String.fromCodePoint(L+=parseInt(de,q)),he.set(le,de),re&&K.set(de,le)}}),{map:he,reverseMap:K}}var m,G,F;function k(){if(!m){var V=g(p.pairs,!0),re=V.map,q=V.reverseMap;m=re,G=q,F=g(p.canonical,!1).map}}function U(V){return k(),m.get(V)||null}function w(V){return k(),G.get(V)||null}function O(V){return k(),F.get(V)||null}var _=h.L,C=h.R,W=h.EN,M=h.ES,J=h.ET,y=h.AN,R=h.CS,T=h.B,z=h.S,I=h.ON,Z=h.BN,ie=h.NSM,P=h.AL,E=h.LRO,v=h.RLO,b=h.LRE,S=h.RLE,D=h.PDF,x=h.LRI,N=h.RLI,A=h.FSI,B=h.PDI;function X(V,re){for(var q=125,L=new Uint32Array(V.length),he=0;he<V.length;he++)L[he]=u(V[he]);var K=new Map;function ne(Be,ze){var Ie=L[Be];L[Be]=ze,K.set(Ie,K.get(Ie)-1),Ie&i&&K.set(i,K.get(i)-1),K.set(ze,(K.get(ze)||0)+1),ze&i&&K.set(i,(K.get(i)||0)+1)}for(var Y=new Uint8Array(V.length),be=new Map,te=[],ae=null,le=0;le<V.length;le++)ae||te.push(ae={start:le,end:V.length-1,level:re==="rtl"?1:re==="ltr"?0:Ht(le,!1)}),L[le]&T&&(ae.end=le,ae=null);for(var de=S|b|v|E|e|B|D|T,Se=function(Be){return Be+(Be&1?1:2)},De=function(Be){return Be+(Be&1?2:1)},ge=0;ge<te.length;ge++){ae=te[ge];var me=[{_level:ae.level,_override:0,_isolate:0}],fe=void 0,ke=0,we=0,Pe=0;K.clear();for(var Te=ae.start;Te<=ae.end;Te++){var ce=L[Te];if(fe=me[me.length-1],K.set(ce,(K.get(ce)||0)+1),ce&i&&K.set(i,(K.get(i)||0)+1),ce&de)if(ce&(S|b)){Y[Te]=fe._level;var Ue=(ce===S?De:Se)(fe._level);Ue<=q&&!ke&&!we?me.push({_level:Ue,_override:0,_isolate:0}):ke||we++}else if(ce&(v|E)){Y[Te]=fe._level;var Ye=(ce===v?De:Se)(fe._level);Ye<=q&&!ke&&!we?me.push({_level:Ye,_override:ce&v?C:_,_isolate:0}):ke||we++}else if(ce&e){ce&A&&(ce=Ht(Te+1,!0)===1?N:x),Y[Te]=fe._level,fe._override&&ne(Te,fe._override);var xe=(ce===N?De:Se)(fe._level);xe<=q&&ke===0&&we===0?(Pe++,me.push({_level:xe,_override:0,_isolate:1,_isolInitIndex:Te})):ke++}else if(ce&B){if(ke>0)ke--;else if(Pe>0){for(we=0;!me[me.length-1]._isolate;)me.pop();var ye=me[me.length-1]._isolInitIndex;ye!=null&&(be.set(ye,Te),be.set(Te,ye)),me.pop(),Pe--}fe=me[me.length-1],Y[Te]=fe._level,fe._override&&ne(Te,fe._override)}else ce&D?(ke===0&&(we>0?we--:!fe._isolate&&me.length>1&&(me.pop(),fe=me[me.length-1])),Y[Te]=fe._level):ce&T&&(Y[Te]=ae.level);else Y[Te]=fe._level,fe._override&&ce!==Z&&ne(Te,fe._override)}for(var Ae=[],Fe=null,ve=ae.start;ve<=ae.end;ve++){var Ce=L[ve];if(!(Ce&n)){var Ge=Y[ve],Oe=Ce&e,Ee=Ce===B;Fe&&Ge===Fe._level?(Fe._end=ve,Fe._endsWithIsolInit=Oe):Ae.push(Fe={_start:ve,_end:ve,_level:Ge,_startsWithPDI:Ee,_endsWithIsolInit:Oe})}}for(var We=[],Je=0;Je<Ae.length;Je++){var He=Ae[Je];if(!He._startsWithPDI||He._startsWithPDI&&!be.has(He._start)){for(var Ke=[Fe=He],qe=void 0;Fe&&Fe._endsWithIsolInit&&(qe=be.get(Fe._end))!=null;)for(var Xe=Je+1;Xe<Ae.length;Xe++)if(Ae[Xe]._start===qe){Ke.push(Fe=Ae[Xe]);break}for(var Le=[],$e=0;$e<Ke.length;$e++)for(var kt=Ke[$e],Hr=kt._start;Hr<=kt._end;Hr++)Le.push(Hr);for(var wn=Y[Le[0]],wt=ae.level,Sr=Le[0]-1;Sr>=0;Sr--)if(!(L[Sr]&n)){wt=Y[Sr];break}var Xr=Le[Le.length-1],Fn=Y[Xr],Ft=ae.level;if(!(L[Xr]&e)){for(var Tr=Xr+1;Tr<=ae.end;Tr++)if(!(L[Tr]&n)){Ft=Y[Tr];break}}We.push({_seqIndices:Le,_sosType:Math.max(wt,wn)%2?C:_,_eosType:Math.max(Ft,Fn)%2?C:_})}}for(var Yr=0;Yr<We.length;Yr++){var Jr=We[Yr],oe=Jr._seqIndices,lr=Jr._sosType,Cn=Jr._eosType,tr=Y[oe[0]]&1?C:_;if(K.get(ie))for(var kr=0;kr<oe.length;kr++){var Ct=oe[kr];if(L[Ct]&ie){for(var Kr=lr,wr=kr-1;wr>=0;wr--)if(!(L[oe[wr]]&n)){Kr=L[oe[wr]];break}ne(Ct,Kr&(e|B)?I:Kr)}}if(K.get(W))for(var Fr=0;Fr<oe.length;Fr++){var Dt=oe[Fr];if(L[Dt]&W)for(var Cr=Fr-1;Cr>=-1;Cr--){var At=Cr===-1?lr:L[oe[Cr]];if(At&a){At===P&&ne(Dt,y);break}}}if(K.get(P))for(var Qr=0;Qr<oe.length;Qr++){var Et=oe[Qr];L[Et]&P&&ne(Et,C)}if(K.get(M)||K.get(R))for(var ur=1;ur<oe.length-1;ur++){var Zr=oe[ur];if(L[Zr]&(M|R)){for(var nr=0,qr=0,$r=ur-1;$r>=0&&(nr=L[oe[$r]],!!(nr&n));$r--);for(var et=ur+1;et<oe.length&&(qr=L[oe[et]],!!(qr&n));et++);nr===qr&&(L[Zr]===M?nr===W:nr&(W|y))&&ne(Zr,nr)}}if(K.get(W))for(var Ve=0;Ve<oe.length;Ve++){var Dn=oe[Ve];if(L[Dn]&W){for(var Dr=Ve-1;Dr>=0&&L[oe[Dr]]&(J|n);Dr--)ne(oe[Dr],W);for(Ve++;Ve<oe.length&&L[oe[Ve]]&(J|n|W);Ve++)L[oe[Ve]]!==W&&ne(oe[Ve],W)}}if(K.get(J)||K.get(M)||K.get(R))for(var cr=0;cr<oe.length;cr++){var Mt=oe[cr];if(L[Mt]&(J|M|R)){ne(Mt,I);for(var Ar=cr-1;Ar>=0&&L[oe[Ar]]&n;Ar--)ne(oe[Ar],I);for(var Er=cr+1;Er<oe.length&&L[oe[Er]]&n;Er++)ne(oe[Er],I)}}if(K.get(W))for(var rt=0,Rt=lr;rt<oe.length;rt++){var Ot=oe[rt],tt=L[Ot];tt&W?Rt===_&&ne(Ot,_):tt&a&&(Rt=tt)}if(K.get(i)){var hr=C|W|y,Gt=hr|_,Mr=[];{for(var ar=[],or=0;or<oe.length;or++)if(L[oe[or]]&i){var dr=V[oe[or]],Lt=void 0;if(U(dr)!==null)if(ar.length<63)ar.push({char:dr,seqIndex:or});else break;else if((Lt=w(dr))!==null)for(var vr=ar.length-1;vr>=0;vr--){var nt=ar[vr].char;if(nt===Lt||nt===w(O(dr))||U(O(nt))===dr){Mr.push([ar[vr].seqIndex,or]),ar.length=vr;break}}}Mr.sort(function(Be,ze){return Be[0]-ze[0]})}for(var at=0;at<Mr.length;at++){for(var Pt=Mr[at],Rr=Pt[0],ot=Pt[1],Bt=!1,je=0,it=Rr+1;it<ot;it++){var It=oe[it];if(L[It]&Gt){Bt=!0;var Nt=L[It]&hr?C:_;if(Nt===tr){je=Nt;break}}}if(Bt&&!je){je=lr;for(var st=Rr-1;st>=0;st--){var Wt=oe[st];if(L[Wt]&Gt){var jt=L[Wt]&hr?C:_;jt!==tr?je=jt:je=tr;break}}}if(je){if(L[oe[Rr]]=L[oe[ot]]=je,je!==tr){for(var pr=Rr+1;pr<oe.length;pr++)if(!(L[oe[pr]]&n)){u(V[oe[pr]])&ie&&(L[oe[pr]]=je);break}}if(je!==tr){for(var gr=ot+1;gr<oe.length;gr++)if(!(L[oe[gr]]&n)){u(V[oe[gr]])&ie&&(L[oe[gr]]=je);break}}}}for(var Qe=0;Qe<oe.length;Qe++)if(L[oe[Qe]]&i){for(var zt=Qe,ft=Qe,lt=lr,mr=Qe-1;mr>=0;mr--)if(L[oe[mr]]&n)zt=mr;else{lt=L[oe[mr]]&hr?C:_;break}for(var Vt=Cn,yr=Qe+1;yr<oe.length;yr++)if(L[oe[yr]]&(i|n))ft=yr;else{Vt=L[oe[yr]]&hr?C:_;break}for(var ut=zt;ut<=ft;ut++)L[oe[ut]]=lt===Vt?lt:tr;Qe=ft}}}for(var Ne=ae.start;Ne<=ae.end;Ne++){var An=Y[Ne],Or=L[Ne];if(An&1?Or&(_|W|y)&&Y[Ne]++:Or&C?Y[Ne]++:Or&(y|W)&&(Y[Ne]+=2),Or&n&&(Y[Ne]=Ne===0?ae.level:Y[Ne-1]),Ne===ae.end||u(V[Ne])&(z|T))for(var Gr=Ne;Gr>=0&&u(V[Gr])&o;Gr--)Y[Gr]=ae.level}}return{levels:Y,paragraphs:te};function Ht(Be,ze){for(var Ie=Be;Ie<V.length;Ie++){var Ze=L[Ie];if(Ze&(C|P))return 1;if(Ze&(T|_)||ze&&Ze===B)return 0;if(Ze&e){var Xt=En(Ie);Ie=Xt===-1?V.length:Xt}}return 0}function En(Be){for(var ze=1,Ie=Be+1;Ie<V.length;Ie++){var Ze=L[Ie];if(Ze&T)break;if(Ze&B){if(--ze===0)return Ie}else Ze&e&&ze++}return-1}}var $="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",H;function j(){if(!H){var V=g($,!0),re=V.map,q=V.reverseMap;q.forEach(function(L,he){re.set(he,L)}),H=re}}function pe(V){return j(),H.get(V)||null}function ue(V,re,q,L){var he=V.length;q=Math.max(0,q==null?0:+q),L=Math.min(he-1,L==null?he-1:+L);for(var K=new Map,ne=q;ne<=L;ne++)if(re[ne]&1){var Y=pe(V[ne]);Y!==null&&K.set(ne,Y)}return K}function Q(V,re,q,L){var he=V.length;q=Math.max(0,q==null?0:+q),L=Math.min(he-1,L==null?he-1:+L);var K=[];return re.paragraphs.forEach(function(ne){var Y=Math.max(q,ne.start),be=Math.min(L,ne.end);if(Y<be){for(var te=re.levels.slice(Y,be+1),ae=be;ae>=Y&&u(V[ae])&o;ae--)te[ae]=ne.level;for(var le=ne.level,de=1/0,Se=0;Se<te.length;Se++){var De=te[Se];De>le&&(le=De),De<de&&(de=De|1)}for(var ge=le;ge>=de;ge--)for(var me=0;me<te.length;me++)if(te[me]>=ge){for(var fe=me;me+1<te.length&&te[me+1]>=ge;)me++;me>fe&&K.push([fe+Y,me+Y])}}}),K}function ee(V,re,q,L){var he=se(V,re,q,L),K=[].concat(V);return he.forEach(function(ne,Y){K[Y]=(re.levels[ne]&1?pe(V[ne]):null)||V[ne]}),K.join("")}function se(V,re,q,L){for(var he=Q(V,re,q,L),K=[],ne=0;ne<V.length;ne++)K[ne]=ne;return he.forEach(function(Y){for(var be=Y[0],te=Y[1],ae=K.slice(be,te+1),le=ae.length;le--;)K[te-le]=ae[le]}),K}return t.closingToOpeningBracket=w,t.getBidiCharType=u,t.getBidiCharTypeName=c,t.getCanonicalBracket=O,t.getEmbeddingLevels=X,t.getMirroredCharacter=pe,t.getMirroredCharactersMap=ue,t.getReorderSegments=Q,t.getReorderedIndices=se,t.getReorderedString=ee,t.openingToClosingBracket=U,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return l}const pn=/\bvoid\s+main\s*\(\s*\)\s*{/g;function yt(l){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function d(h,r){let e=Ln[r];return e?yt(e):h}return l.replace(t,d)}const Re=[];for(let l=0;l<256;l++)Re[l]=(l<16?"0":"")+l.toString(16);function aa(){const l=Math.random()*4294967295|0,t=Math.random()*4294967295|0,d=Math.random()*4294967295|0,h=Math.random()*4294967295|0;return(Re[l&255]+Re[l>>8&255]+Re[l>>16&255]+Re[l>>24&255]+"-"+Re[t&255]+Re[t>>8&255]+"-"+Re[t>>16&15|64]+Re[t>>24&255]+"-"+Re[d&63|128]+Re[d>>8&255]+"-"+Re[d>>16&255]+Re[d>>24&255]+Re[h&255]+Re[h>>8&255]+Re[h>>16&255]+Re[h>>24&255]).toUpperCase()}const er=Object.assign||function(){let l=arguments[0];for(let t=1,d=arguments.length;t<d;t++){let h=arguments[t];if(h)for(let r in h)Object.prototype.hasOwnProperty.call(h,r)&&(l[r]=h[r])}return l},oa=Date.now(),Qt=new WeakMap,Zt=new Map;let ia=1e10;function bt(l,t){const d=ua(t);let h=Qt.get(l);if(h||Qt.set(l,h=Object.create(null)),h[d])return new h[d];const r=`_onBeforeCompile${d}`,e=function(o,s){l.onBeforeCompile.call(this,o,s);const f=this.customProgramCacheKey()+"|"+o.vertexShader+"|"+o.fragmentShader;let u=Zt[f];if(!u){const c=sa(this,o,t,d);u=Zt[f]=c}o.vertexShader=u.vertexShader,o.fragmentShader=u.fragmentShader,er(o.uniforms,this.uniforms),t.timeUniform&&(o.uniforms[t.timeUniform]={get value(){return Date.now()-oa}}),this[r]&&this[r](o)},a=function(){return i(t.chained?l:l.clone())},i=function(o){const s=Object.create(o,n);return Object.defineProperty(s,"baseMaterial",{value:l}),Object.defineProperty(s,"id",{value:ia++}),s.uuid=aa(),s.uniforms=er({},o.uniforms,t.uniforms),s.defines=er({},o.defines,t.defines),s.defines[`TROIKA_DERIVED_MATERIAL_${d}`]="",s.extensions=er({},o.extensions,t.extensions),s._listeners=void 0,s},n={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>l.type,set:o=>{l.type=o}},isDerivedFrom:{writable:!0,configurable:!0,value:function(o){const s=this.baseMaterial;return o===s||s.isDerivedMaterial&&s.isDerivedFrom(o)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return l.customProgramCacheKey()+"|"+d}},onBeforeCompile:{get(){return e},set(o){this[r]=o}},copy:{writable:!0,configurable:!0,value:function(o){return l.copy.call(this,o),!l.isShaderMaterial&&!l.isDerivedMaterial&&(er(this.extensions,o.extensions),er(this.defines,o.defines),er(this.uniforms,Mn.clone(o.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const o=new l.constructor;return i(o).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let o=this._depthMaterial;return o||(o=this._depthMaterial=bt(l.isDerivedMaterial?l.getDepthMaterial():new Rn({depthPacking:On}),t),o.defines.IS_DEPTH_MATERIAL="",o.uniforms=this.uniforms),o}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let o=this._distanceMaterial;return o||(o=this._distanceMaterial=bt(l.isDerivedMaterial?l.getDistanceMaterial():new Gn,t),o.defines.IS_DISTANCE_MATERIAL="",o.uniforms=this.uniforms),o}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:o,_distanceMaterial:s}=this;o&&o.dispose(),s&&s.dispose(),l.dispose.call(this)}}};return h[d]=a,new a}function sa(l,{vertexShader:t,fragmentShader:d},h,r){let{vertexDefs:e,vertexMainIntro:a,vertexMainOutro:i,vertexTransform:n,fragmentDefs:o,fragmentMainIntro:s,fragmentMainOutro:f,fragmentColorTransform:u,customRewriter:c,timeUniform:p}=h;if(e=e||"",a=a||"",i=i||"",o=o||"",s=s||"",f=f||"",(n||c)&&(t=yt(t)),(u||c)&&(d=d.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),d=yt(d)),c){let g=c({vertexShader:t,fragmentShader:d});t=g.vertexShader,d=g.fragmentShader}if(u){let g=[];d=d.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,m=>(g.push(m),"")),f=`${u}
${g.join(`
`)}
${f}`}if(p){const g=`
uniform float ${p};
`;e=g+e,o=g+o}return n&&(t=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${t}
`,e=`${e}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${n}
}
`,a=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${a}
`,t=t.replace(/\b(position|normal|uv)\b/g,(g,m,G,F)=>/\battribute\s+vec[23]\s+$/.test(F.substr(0,G))?m:`troika_${m}_${r}`),l.map&&l.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),t=qt(t,r,e,a,i),d=qt(d,r,o,s,f),{vertexShader:t,fragmentShader:d}}function qt(l,t,d,h,r){return(h||r||d)&&(l=l.replace(pn,`
${d}
void troikaOrigMain${t}() {`),l+=`
void main() {
  ${h}
  troikaOrigMain${t}();
  ${r}
}`),l}function fa(l,t){return l==="uniforms"?void 0:typeof t=="function"?t.toString():t}let la=0;const $t=new Map;function ua(l){const t=JSON.stringify(l,fa);let d=$t.get(t);return d==null&&$t.set(t,d=++la),d}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function ca(){return typeof window>"u"&&(self.window=self),function(l){var t={parse:function(r){var e=t._bin,a=new Uint8Array(r);if(e.readASCII(a,0,4)=="ttcf"){var i=4;e.readUshort(a,i),i+=2,e.readUshort(a,i),i+=2;var n=e.readUint(a,i);i+=4;for(var o=[],s=0;s<n;s++){var f=e.readUint(a,i);i+=4,o.push(t._readFont(a,f))}return o}return[t._readFont(a,0)]},_readFont:function(r,e){var a=t._bin,i=e;a.readFixed(r,e),e+=4;var n=a.readUshort(r,e);e+=2,a.readUshort(r,e),e+=2,a.readUshort(r,e),e+=2,a.readUshort(r,e),e+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],s={_data:r,_offset:i},f={},u=0;u<n;u++){var c=a.readASCII(r,e,4);e+=4,a.readUint(r,e),e+=4;var p=a.readUint(r,e);e+=4;var g=a.readUint(r,e);e+=4,f[c]={offset:p,length:g}}for(u=0;u<o.length;u++){var m=o[u];f[m]&&(s[m.trim()]=t[m.trim()].parse(r,f[m].offset,f[m].length,s))}return s},_tabOffset:function(r,e,a){for(var i=t._bin,n=i.readUshort(r,a+4),o=a+12,s=0;s<n;s++){var f=i.readASCII(r,o,4);o+=4,i.readUint(r,o),o+=4;var u=i.readUint(r,o);if(o+=4,i.readUint(r,o),o+=4,f==e)return u}return 0}};t._bin={readFixed:function(r,e){return(r[e]<<8|r[e+1])+(r[e+2]<<8|r[e+3])/65540},readF2dot14:function(r,e){return t._bin.readShort(r,e)/16384},readInt:function(r,e){return t._bin._view(r).getInt32(e)},readInt8:function(r,e){return t._bin._view(r).getInt8(e)},readShort:function(r,e){return t._bin._view(r).getInt16(e)},readUshort:function(r,e){return t._bin._view(r).getUint16(e)},readUshorts:function(r,e,a){for(var i=[],n=0;n<a;n++)i.push(t._bin.readUshort(r,e+2*n));return i},readUint:function(r,e){return t._bin._view(r).getUint32(e)},readUint64:function(r,e){return 4294967296*t._bin.readUint(r,e)+t._bin.readUint(r,e+4)},readASCII:function(r,e,a){for(var i="",n=0;n<a;n++)i+=String.fromCharCode(r[e+n]);return i},readUnicode:function(r,e,a){for(var i="",n=0;n<a;n++){var o=r[e++]<<8|r[e++];i+=String.fromCharCode(o)}return i},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,e,a){var i=t._bin._tdec;return i&&e==0&&a==r.length?i.decode(r):t._bin.readASCII(r,e,a)},readBytes:function(r,e,a){for(var i=[],n=0;n<a;n++)i.push(r[e+n]);return i},readASCIIArray:function(r,e,a){for(var i=[],n=0;n<a;n++)i.push(String.fromCharCode(r[e+n]));return i},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},t._lctf={},t._lctf.parse=function(r,e,a,i,n){var o=t._bin,s={},f=e;o.readFixed(r,e),e+=4;var u=o.readUshort(r,e);e+=2;var c=o.readUshort(r,e);e+=2;var p=o.readUshort(r,e);return e+=2,s.scriptList=t._lctf.readScriptList(r,f+u),s.featureList=t._lctf.readFeatureList(r,f+c),s.lookupList=t._lctf.readLookupList(r,f+p,n),s},t._lctf.readLookupList=function(r,e,a){var i=t._bin,n=e,o=[],s=i.readUshort(r,e);e+=2;for(var f=0;f<s;f++){var u=i.readUshort(r,e);e+=2;var c=t._lctf.readLookupTable(r,n+u,a);o.push(c)}return o},t._lctf.readLookupTable=function(r,e,a){var i=t._bin,n=e,o={tabs:[]};o.ltype=i.readUshort(r,e),e+=2,o.flag=i.readUshort(r,e),e+=2;var s=i.readUshort(r,e);e+=2;for(var f=o.ltype,u=0;u<s;u++){var c=i.readUshort(r,e);e+=2;var p=a(r,f,n+c,o);o.tabs.push(p)}return o},t._lctf.numOfOnes=function(r){for(var e=0,a=0;a<32;a++)r>>>a&1&&e++;return e},t._lctf.readClassDef=function(r,e){var a=t._bin,i=[],n=a.readUshort(r,e);if(e+=2,n==1){var o=a.readUshort(r,e);e+=2;var s=a.readUshort(r,e);e+=2;for(var f=0;f<s;f++)i.push(o+f),i.push(o+f),i.push(a.readUshort(r,e)),e+=2}if(n==2){var u=a.readUshort(r,e);for(e+=2,f=0;f<u;f++)i.push(a.readUshort(r,e)),e+=2,i.push(a.readUshort(r,e)),e+=2,i.push(a.readUshort(r,e)),e+=2}return i},t._lctf.getInterval=function(r,e){for(var a=0;a<r.length;a+=3){var i=r[a],n=r[a+1];if(r[a+2],i<=e&&e<=n)return a}return-1},t._lctf.readCoverage=function(r,e){var a=t._bin,i={};i.fmt=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);return e+=2,i.fmt==1&&(i.tab=a.readUshorts(r,e,n)),i.fmt==2&&(i.tab=a.readUshorts(r,e,3*n)),i},t._lctf.coverageIndex=function(r,e){var a=r.tab;if(r.fmt==1)return a.indexOf(e);if(r.fmt==2){var i=t._lctf.getInterval(a,e);if(i!=-1)return a[i+2]+(e-a[i])}return-1},t._lctf.readFeatureList=function(r,e){var a=t._bin,i=e,n=[],o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var f=a.readASCII(r,e,4);e+=4;var u=a.readUshort(r,e);e+=2;var c=t._lctf.readFeatureTable(r,i+u);c.tag=f.trim(),n.push(c)}return n},t._lctf.readFeatureTable=function(r,e){var a=t._bin,i=e,n={},o=a.readUshort(r,e);e+=2,o>0&&(n.featureParams=i+o);var s=a.readUshort(r,e);e+=2,n.tab=[];for(var f=0;f<s;f++)n.tab.push(a.readUshort(r,e+2*f));return n},t._lctf.readScriptList=function(r,e){var a=t._bin,i=e,n={},o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var f=a.readASCII(r,e,4);e+=4;var u=a.readUshort(r,e);e+=2,n[f.trim()]=t._lctf.readScriptTable(r,i+u)}return n},t._lctf.readScriptTable=function(r,e){var a=t._bin,i=e,n={},o=a.readUshort(r,e);e+=2,o>0&&(n.default=t._lctf.readLangSysTable(r,i+o));var s=a.readUshort(r,e);e+=2;for(var f=0;f<s;f++){var u=a.readASCII(r,e,4);e+=4;var c=a.readUshort(r,e);e+=2,n[u.trim()]=t._lctf.readLangSysTable(r,i+c)}return n},t._lctf.readLangSysTable=function(r,e){var a=t._bin,i={};a.readUshort(r,e),e+=2,i.reqFeature=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);return e+=2,i.features=a.readUshorts(r,e,n),i},t.CFF={},t.CFF.parse=function(r,e,a){var i=t._bin;(r=new Uint8Array(r.buffer,e,a))[e=0],r[++e],r[++e],r[++e],e++;var n=[];e=t.CFF.readIndex(r,e,n);for(var o=[],s=0;s<n.length-1;s++)o.push(i.readASCII(r,e+n[s],n[s+1]-n[s]));e+=n[n.length-1];var f=[];e=t.CFF.readIndex(r,e,f);var u=[];for(s=0;s<f.length-1;s++)u.push(t.CFF.readDict(r,e+f[s],e+f[s+1]));e+=f[f.length-1];var c=u[0],p=[];e=t.CFF.readIndex(r,e,p);var g=[];for(s=0;s<p.length-1;s++)g.push(i.readASCII(r,e+p[s],p[s+1]-p[s]));if(e+=p[p.length-1],t.CFF.readSubrs(r,e,c),c.CharStrings){e=c.CharStrings,p=[],e=t.CFF.readIndex(r,e,p);var m=[];for(s=0;s<p.length-1;s++)m.push(i.readBytes(r,e+p[s],p[s+1]-p[s]));c.CharStrings=m}if(c.ROS){e=c.FDArray;var G=[];for(e=t.CFF.readIndex(r,e,G),c.FDArray=[],s=0;s<G.length-1;s++){var F=t.CFF.readDict(r,e+G[s],e+G[s+1]);t.CFF._readFDict(r,F,g),c.FDArray.push(F)}e+=G[G.length-1],e=c.FDSelect,c.FDSelect=[];var k=r[e];if(e++,k!=3)throw k;var U=i.readUshort(r,e);for(e+=2,s=0;s<U+1;s++)c.FDSelect.push(i.readUshort(r,e),r[e+2]),e+=3}return c.Encoding&&(c.Encoding=t.CFF.readEncoding(r,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=t.CFF.readCharset(r,c.charset,c.CharStrings.length)),t.CFF._readFDict(r,c,g),c},t.CFF._readFDict=function(r,e,a){var i;for(var n in e.Private&&(i=e.Private[1],e.Private=t.CFF.readDict(r,i,i+e.Private[0]),e.Private.Subrs&&t.CFF.readSubrs(r,i+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(n)!=-1&&(e[n]=a[e[n]-426+35])},t.CFF.readSubrs=function(r,e,a){var i=t._bin,n=[];e=t.CFF.readIndex(r,e,n);var o,s=n.length;o=s<1240?107:s<33900?1131:32768,a.Bias=o,a.Subrs=[];for(var f=0;f<n.length-1;f++)a.Subrs.push(i.readBytes(r,e+n[f],n[f+1]-n[f]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(r,e){for(var a=0;a<r.charset.length;a++)if(r.charset[a]==e)return a;return-1},t.CFF.glyphBySE=function(r,e){return e<0||e>255?-1:t.CFF.glyphByUnicode(r,t.CFF.tableSE[e])},t.CFF.readEncoding=function(r,e,a){t._bin;var i=[".notdef"],n=r[e];if(e++,n!=0)throw"error: unknown encoding format: "+n;var o=r[e];e++;for(var s=0;s<o;s++)i.push(r[e+s]);return i},t.CFF.readCharset=function(r,e,a){var i=t._bin,n=[".notdef"],o=r[e];if(e++,o==0)for(var s=0;s<a;s++){var f=i.readUshort(r,e);e+=2,n.push(f)}else{if(o!=1&&o!=2)throw"error: format: "+o;for(;n.length<a;){f=i.readUshort(r,e),e+=2;var u=0;for(o==1?(u=r[e],e++):(u=i.readUshort(r,e),e+=2),s=0;s<=u;s++)n.push(f),f++}}return n},t.CFF.readIndex=function(r,e,a){var i=t._bin,n=i.readUshort(r,e)+1,o=r[e+=2];if(e++,o==1)for(var s=0;s<n;s++)a.push(r[e+s]);else if(o==2)for(s=0;s<n;s++)a.push(i.readUshort(r,e+2*s));else if(o==3)for(s=0;s<n;s++)a.push(16777215&i.readUint(r,e+3*s-1));else if(n!=1)throw"unsupported offset size: "+o+", count: "+n;return(e+=n*o)-1},t.CFF.getCharString=function(r,e,a){var i=t._bin,n=r[e],o=r[e+1];r[e+2],r[e+3],r[e+4];var s=1,f=null,u=null;n<=20&&(f=n,s=1),n==12&&(f=100*n+o,s=2),21<=n&&n<=27&&(f=n,s=1),n==28&&(u=i.readShort(r,e+1),s=3),29<=n&&n<=31&&(f=n,s=1),32<=n&&n<=246&&(u=n-139,s=1),247<=n&&n<=250&&(u=256*(n-247)+o+108,s=2),251<=n&&n<=254&&(u=256*-(n-251)-o-108,s=2),n==255&&(u=i.readInt(r,e+1)/65535,s=5),a.val=u??"o"+f,a.size=s},t.CFF.readCharString=function(r,e,a){for(var i=e+a,n=t._bin,o=[];e<i;){var s=r[e],f=r[e+1];r[e+2],r[e+3],r[e+4];var u=1,c=null,p=null;s<=20&&(c=s,u=1),s==12&&(c=100*s+f,u=2),s!=19&&s!=20||(c=s,u=2),21<=s&&s<=27&&(c=s,u=1),s==28&&(p=n.readShort(r,e+1),u=3),29<=s&&s<=31&&(c=s,u=1),32<=s&&s<=246&&(p=s-139,u=1),247<=s&&s<=250&&(p=256*(s-247)+f+108,u=2),251<=s&&s<=254&&(p=256*-(s-251)-f-108,u=2),s==255&&(p=n.readInt(r,e+1)/65535,u=5),o.push(p??"o"+c),e+=u}return o},t.CFF.readDict=function(r,e,a){for(var i=t._bin,n={},o=[];e<a;){var s=r[e],f=r[e+1];r[e+2],r[e+3],r[e+4];var u=1,c=null,p=null;if(s==28&&(p=i.readShort(r,e+1),u=3),s==29&&(p=i.readInt(r,e+1),u=5),32<=s&&s<=246&&(p=s-139,u=1),247<=s&&s<=250&&(p=256*(s-247)+f+108,u=2),251<=s&&s<=254&&(p=256*-(s-251)-f-108,u=2),s==255)throw p=i.readInt(r,e+1)/65535,u=5,"unknown number";if(s==30){var g=[];for(u=1;;){var m=r[e+u];u++;var G=m>>4,F=15&m;if(G!=15&&g.push(G),F!=15&&g.push(F),F==15)break}for(var k="",U=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],w=0;w<g.length;w++)k+=U[g[w]];p=parseFloat(k)}s<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,s==12&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],u=2)),c!=null?(n[c]=o.length==1?o[0]:o,o=[]):o.push(p),e+=u}return n},t.cmap={},t.cmap.parse=function(r,e,a){r=new Uint8Array(r.buffer,e,a),e=0;var i=t._bin,n={};i.readUshort(r,e),e+=2;var o=i.readUshort(r,e);e+=2;var s=[];n.tables=[];for(var f=0;f<o;f++){var u=i.readUshort(r,e);e+=2;var c=i.readUshort(r,e);e+=2;var p=i.readUint(r,e);e+=4;var g="p"+u+"e"+c,m=s.indexOf(p);if(m==-1){var G;m=n.tables.length,s.push(p);var F=i.readUshort(r,p);F==0?G=t.cmap.parse0(r,p):F==4?G=t.cmap.parse4(r,p):F==6?G=t.cmap.parse6(r,p):F==12?G=t.cmap.parse12(r,p):console.debug("unknown format: "+F,u,c,p),n.tables.push(G)}if(n[g]!=null)throw"multiple tables for one platform+encoding";n[g]=m}return n},t.cmap.parse0=function(r,e){var a=t._bin,i={};i.format=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);e+=2,a.readUshort(r,e),e+=2,i.map=[];for(var o=0;o<n-6;o++)i.map.push(r[e+o]);return i},t.cmap.parse4=function(r,e){var a=t._bin,i=e,n={};n.format=a.readUshort(r,e),e+=2;var o=a.readUshort(r,e);e+=2,a.readUshort(r,e),e+=2;var s=a.readUshort(r,e);e+=2;var f=s/2;n.searchRange=a.readUshort(r,e),e+=2,n.entrySelector=a.readUshort(r,e),e+=2,n.rangeShift=a.readUshort(r,e),e+=2,n.endCount=a.readUshorts(r,e,f),e+=2*f,e+=2,n.startCount=a.readUshorts(r,e,f),e+=2*f,n.idDelta=[];for(var u=0;u<f;u++)n.idDelta.push(a.readShort(r,e)),e+=2;for(n.idRangeOffset=a.readUshorts(r,e,f),e+=2*f,n.glyphIdArray=[];e<i+o;)n.glyphIdArray.push(a.readUshort(r,e)),e+=2;return n},t.cmap.parse6=function(r,e){var a=t._bin,i={};i.format=a.readUshort(r,e),e+=2,a.readUshort(r,e),e+=2,a.readUshort(r,e),e+=2,i.firstCode=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);e+=2,i.glyphIdArray=[];for(var o=0;o<n;o++)i.glyphIdArray.push(a.readUshort(r,e)),e+=2;return i},t.cmap.parse12=function(r,e){var a=t._bin,i={};i.format=a.readUshort(r,e),e+=2,e+=2,a.readUint(r,e),e+=4,a.readUint(r,e),e+=4;var n=a.readUint(r,e);e+=4,i.groups=[];for(var o=0;o<n;o++){var s=e+12*o,f=a.readUint(r,s+0),u=a.readUint(r,s+4),c=a.readUint(r,s+8);i.groups.push([f,u,c])}return i},t.glyf={},t.glyf.parse=function(r,e,a,i){for(var n=[],o=0;o<i.maxp.numGlyphs;o++)n.push(null);return n},t.glyf._parseGlyf=function(r,e){var a=t._bin,i=r._data,n=t._tabOffset(i,"glyf",r._offset)+r.loca[e];if(r.loca[e]==r.loca[e+1])return null;var o={};if(o.noc=a.readShort(i,n),n+=2,o.xMin=a.readShort(i,n),n+=2,o.yMin=a.readShort(i,n),n+=2,o.xMax=a.readShort(i,n),n+=2,o.yMax=a.readShort(i,n),n+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var s=0;s<o.noc;s++)o.endPts.push(a.readUshort(i,n)),n+=2;var f=a.readUshort(i,n);if(n+=2,i.length-n<f)return null;o.instructions=a.readBytes(i,n,f),n+=f;var u=o.endPts[o.noc-1]+1;for(o.flags=[],s=0;s<u;s++){var c=i[n];if(n++,o.flags.push(c),(8&c)!=0){var p=i[n];n++;for(var g=0;g<p;g++)o.flags.push(c),s++}}for(o.xs=[],s=0;s<u;s++){var m=(2&o.flags[s])!=0,G=(16&o.flags[s])!=0;m?(o.xs.push(G?i[n]:-i[n]),n++):G?o.xs.push(0):(o.xs.push(a.readShort(i,n)),n+=2)}for(o.ys=[],s=0;s<u;s++)m=(4&o.flags[s])!=0,G=(32&o.flags[s])!=0,m?(o.ys.push(G?i[n]:-i[n]),n++):G?o.ys.push(0):(o.ys.push(a.readShort(i,n)),n+=2);var F=0,k=0;for(s=0;s<u;s++)F+=o.xs[s],k+=o.ys[s],o.xs[s]=F,o.ys[s]=k}else{var U;o.parts=[];do{U=a.readUshort(i,n),n+=2;var w={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(w),w.glyphIndex=a.readUshort(i,n),n+=2,1&U){var O=a.readShort(i,n);n+=2;var _=a.readShort(i,n);n+=2}else O=a.readInt8(i,n),n++,_=a.readInt8(i,n),n++;2&U?(w.m.tx=O,w.m.ty=_):(w.p1=O,w.p2=_),8&U?(w.m.a=w.m.d=a.readF2dot14(i,n),n+=2):64&U?(w.m.a=a.readF2dot14(i,n),n+=2,w.m.d=a.readF2dot14(i,n),n+=2):128&U&&(w.m.a=a.readF2dot14(i,n),n+=2,w.m.b=a.readF2dot14(i,n),n+=2,w.m.c=a.readF2dot14(i,n),n+=2,w.m.d=a.readF2dot14(i,n),n+=2)}while(32&U);if(256&U){var C=a.readUshort(i,n);for(n+=2,o.instr=[],s=0;s<C;s++)o.instr.push(i[n]),n++}}return o},t.GDEF={},t.GDEF.parse=function(r,e,a,i){var n=e;e+=4;var o=t._bin.readUshort(r,e);return{glyphClassDef:o===0?null:t._lctf.readClassDef(r,n+o)}},t.GPOS={},t.GPOS.parse=function(r,e,a,i){return t._lctf.parse(r,e,a,i,t.GPOS.subt)},t.GPOS.subt=function(r,e,a,i){var n=t._bin,o=a,s={};if(s.fmt=n.readUshort(r,a),a+=2,e==1||e==2||e==3||e==7||e==8&&s.fmt<=2){var f=n.readUshort(r,a);a+=2,s.coverage=t._lctf.readCoverage(r,f+o)}if(e==1&&s.fmt==1){var u=n.readUshort(r,a);a+=2,u!=0&&(s.pos=t.GPOS.readValueRecord(r,a,u))}else if(e==2&&s.fmt>=1&&s.fmt<=2){u=n.readUshort(r,a),a+=2;var c=n.readUshort(r,a);a+=2;var p=t._lctf.numOfOnes(u),g=t._lctf.numOfOnes(c);if(s.fmt==1){s.pairsets=[];var m=n.readUshort(r,a);a+=2;for(var G=0;G<m;G++){var F=o+n.readUshort(r,a);a+=2;var k=n.readUshort(r,F);F+=2;for(var U=[],w=0;w<k;w++){var O=n.readUshort(r,F);F+=2,u!=0&&(y=t.GPOS.readValueRecord(r,F,u),F+=2*p),c!=0&&(R=t.GPOS.readValueRecord(r,F,c),F+=2*g),U.push({gid2:O,val1:y,val2:R})}s.pairsets.push(U)}}if(s.fmt==2){var _=n.readUshort(r,a);a+=2;var C=n.readUshort(r,a);a+=2;var W=n.readUshort(r,a);a+=2;var M=n.readUshort(r,a);for(a+=2,s.classDef1=t._lctf.readClassDef(r,o+_),s.classDef2=t._lctf.readClassDef(r,o+C),s.matrix=[],G=0;G<W;G++){var J=[];for(w=0;w<M;w++){var y=null,R=null;u!=0&&(y=t.GPOS.readValueRecord(r,a,u),a+=2*p),c!=0&&(R=t.GPOS.readValueRecord(r,a,c),a+=2*g),J.push({val1:y,val2:R})}s.matrix.push(J)}}}else if(e==4&&s.fmt==1)s.markCoverage=t._lctf.readCoverage(r,n.readUshort(r,a)+o),s.baseCoverage=t._lctf.readCoverage(r,n.readUshort(r,a+2)+o),s.markClassCount=n.readUshort(r,a+4),s.markArray=t.GPOS.readMarkArray(r,n.readUshort(r,a+6)+o),s.baseArray=t.GPOS.readBaseArray(r,n.readUshort(r,a+8)+o,s.markClassCount);else if(e==6&&s.fmt==1)s.mark1Coverage=t._lctf.readCoverage(r,n.readUshort(r,a)+o),s.mark2Coverage=t._lctf.readCoverage(r,n.readUshort(r,a+2)+o),s.markClassCount=n.readUshort(r,a+4),s.mark1Array=t.GPOS.readMarkArray(r,n.readUshort(r,a+6)+o),s.mark2Array=t.GPOS.readBaseArray(r,n.readUshort(r,a+8)+o,s.markClassCount);else{if(e==9&&s.fmt==1){var T=n.readUshort(r,a);a+=2;var z=n.readUint(r,a);if(a+=4,i.ltype==9)i.ltype=T;else if(i.ltype!=T)throw"invalid extension substitution";return t.GPOS.subt(r,i.ltype,o+z)}console.debug("unsupported GPOS table LookupType",e,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(r,e,a){var i=t._bin,n=[];return n.push(1&a?i.readShort(r,e):0),e+=1&a?2:0,n.push(2&a?i.readShort(r,e):0),e+=2&a?2:0,n.push(4&a?i.readShort(r,e):0),e+=4&a?2:0,n.push(8&a?i.readShort(r,e):0),e+=8&a?2:0,n},t.GPOS.readBaseArray=function(r,e,a){var i=t._bin,n=[],o=e,s=i.readUshort(r,e);e+=2;for(var f=0;f<s;f++){for(var u=[],c=0;c<a;c++)u.push(t.GPOS.readAnchorRecord(r,o+i.readUshort(r,e))),e+=2;n.push(u)}return n},t.GPOS.readMarkArray=function(r,e){var a=t._bin,i=[],n=e,o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var f=t.GPOS.readAnchorRecord(r,a.readUshort(r,e+2)+n);f.markClass=a.readUshort(r,e),i.push(f),e+=4}return i},t.GPOS.readAnchorRecord=function(r,e){var a=t._bin,i={};return i.fmt=a.readUshort(r,e),i.x=a.readShort(r,e+2),i.y=a.readShort(r,e+4),i},t.GSUB={},t.GSUB.parse=function(r,e,a,i){return t._lctf.parse(r,e,a,i,t.GSUB.subt)},t.GSUB.subt=function(r,e,a,i){var n=t._bin,o=a,s={};if(s.fmt=n.readUshort(r,a),a+=2,e!=1&&e!=2&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==2||e==4||e==5&&s.fmt<=2||e==6&&s.fmt<=2){var f=n.readUshort(r,a);a+=2,s.coverage=t._lctf.readCoverage(r,o+f)}if(e==1&&s.fmt>=1&&s.fmt<=2){if(s.fmt==1)s.delta=n.readShort(r,a),a+=2;else if(s.fmt==2){var u=n.readUshort(r,a);a+=2,s.newg=n.readUshorts(r,a,u),a+=2*s.newg.length}}else if(e==2&&s.fmt==1){u=n.readUshort(r,a),a+=2,s.seqs=[];for(var c=0;c<u;c++){var p=n.readUshort(r,a)+o;a+=2;var g=n.readUshort(r,p);s.seqs.push(n.readUshorts(r,p+2,g))}}else if(e==4)for(s.vals=[],u=n.readUshort(r,a),a+=2,c=0;c<u;c++){var m=n.readUshort(r,a);a+=2,s.vals.push(t.GSUB.readLigatureSet(r,o+m))}else if(e==5&&s.fmt==2){if(s.fmt==2){var G=n.readUshort(r,a);a+=2,s.cDef=t._lctf.readClassDef(r,o+G),s.scset=[];var F=n.readUshort(r,a);for(a+=2,c=0;c<F;c++){var k=n.readUshort(r,a);a+=2,s.scset.push(k==0?null:t.GSUB.readSubClassSet(r,o+k))}}}else if(e==6&&s.fmt==3){if(s.fmt==3){for(c=0;c<3;c++){u=n.readUshort(r,a),a+=2;for(var U=[],w=0;w<u;w++)U.push(t._lctf.readCoverage(r,o+n.readUshort(r,a+2*w)));a+=2*u,c==0&&(s.backCvg=U),c==1&&(s.inptCvg=U),c==2&&(s.ahedCvg=U)}u=n.readUshort(r,a),a+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(r,a,u)}}else{if(e==7&&s.fmt==1){var O=n.readUshort(r,a);a+=2;var _=n.readUint(r,a);if(a+=4,i.ltype==9)i.ltype=O;else if(i.ltype!=O)throw"invalid extension substitution";return t.GSUB.subt(r,i.ltype,o+_)}console.debug("unsupported GSUB table LookupType",e,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(r,e){var a=t._bin.readUshort,i=e,n=[],o=a(r,e);e+=2;for(var s=0;s<o;s++){var f=a(r,e);e+=2,n.push(t.GSUB.readSubClassRule(r,i+f))}return n},t.GSUB.readSubClassRule=function(r,e){var a=t._bin.readUshort,i={},n=a(r,e),o=a(r,e+=2);e+=2,i.input=[];for(var s=0;s<n-1;s++)i.input.push(a(r,e)),e+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(r,e,o),i},t.GSUB.readSubstLookupRecords=function(r,e,a){for(var i=t._bin.readUshort,n=[],o=0;o<a;o++)n.push(i(r,e),i(r,e+2)),e+=4;return n},t.GSUB.readChainSubClassSet=function(r,e){var a=t._bin,i=e,n=[],o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var f=a.readUshort(r,e);e+=2,n.push(t.GSUB.readChainSubClassRule(r,i+f))}return n},t.GSUB.readChainSubClassRule=function(r,e){for(var a=t._bin,i={},n=["backtrack","input","lookahead"],o=0;o<n.length;o++){var s=a.readUshort(r,e);e+=2,o==1&&s--,i[n[o]]=a.readUshorts(r,e,s),e+=2*i[n[o]].length}return s=a.readUshort(r,e),e+=2,i.subst=a.readUshorts(r,e,2*s),e+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(r,e){var a=t._bin,i=e,n=[],o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var f=a.readUshort(r,e);e+=2,n.push(t.GSUB.readLigature(r,i+f))}return n},t.GSUB.readLigature=function(r,e){var a=t._bin,i={chain:[]};i.nglyph=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);e+=2;for(var o=0;o<n-1;o++)i.chain.push(a.readUshort(r,e)),e+=2;return i},t.head={},t.head.parse=function(r,e,a){var i=t._bin,n={};return i.readFixed(r,e),e+=4,n.fontRevision=i.readFixed(r,e),e+=4,i.readUint(r,e),e+=4,i.readUint(r,e),e+=4,n.flags=i.readUshort(r,e),e+=2,n.unitsPerEm=i.readUshort(r,e),e+=2,n.created=i.readUint64(r,e),e+=8,n.modified=i.readUint64(r,e),e+=8,n.xMin=i.readShort(r,e),e+=2,n.yMin=i.readShort(r,e),e+=2,n.xMax=i.readShort(r,e),e+=2,n.yMax=i.readShort(r,e),e+=2,n.macStyle=i.readUshort(r,e),e+=2,n.lowestRecPPEM=i.readUshort(r,e),e+=2,n.fontDirectionHint=i.readShort(r,e),e+=2,n.indexToLocFormat=i.readShort(r,e),e+=2,n.glyphDataFormat=i.readShort(r,e),e+=2,n},t.hhea={},t.hhea.parse=function(r,e,a){var i=t._bin,n={};return i.readFixed(r,e),e+=4,n.ascender=i.readShort(r,e),e+=2,n.descender=i.readShort(r,e),e+=2,n.lineGap=i.readShort(r,e),e+=2,n.advanceWidthMax=i.readUshort(r,e),e+=2,n.minLeftSideBearing=i.readShort(r,e),e+=2,n.minRightSideBearing=i.readShort(r,e),e+=2,n.xMaxExtent=i.readShort(r,e),e+=2,n.caretSlopeRise=i.readShort(r,e),e+=2,n.caretSlopeRun=i.readShort(r,e),e+=2,n.caretOffset=i.readShort(r,e),e+=2,e+=8,n.metricDataFormat=i.readShort(r,e),e+=2,n.numberOfHMetrics=i.readUshort(r,e),e+=2,n},t.hmtx={},t.hmtx.parse=function(r,e,a,i){for(var n=t._bin,o={aWidth:[],lsBearing:[]},s=0,f=0,u=0;u<i.maxp.numGlyphs;u++)u<i.hhea.numberOfHMetrics&&(s=n.readUshort(r,e),e+=2,f=n.readShort(r,e),e+=2),o.aWidth.push(s),o.lsBearing.push(f);return o},t.kern={},t.kern.parse=function(r,e,a,i){var n=t._bin,o=n.readUshort(r,e);if(e+=2,o==1)return t.kern.parseV1(r,e-2,a,i);var s=n.readUshort(r,e);e+=2;for(var f={glyph1:[],rval:[]},u=0;u<s;u++){e+=2,a=n.readUshort(r,e),e+=2;var c=n.readUshort(r,e);e+=2;var p=c>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;e=t.kern.readFormat0(r,e,f)}return f},t.kern.parseV1=function(r,e,a,i){var n=t._bin;n.readFixed(r,e),e+=4;var o=n.readUint(r,e);e+=4;for(var s={glyph1:[],rval:[]},f=0;f<o;f++){n.readUint(r,e),e+=4;var u=n.readUshort(r,e);e+=2,n.readUshort(r,e),e+=2;var c=u>>>8;if((c&=15)!=0)throw"unknown kern table format: "+c;e=t.kern.readFormat0(r,e,s)}return s},t.kern.readFormat0=function(r,e,a){var i=t._bin,n=-1,o=i.readUshort(r,e);e+=2,i.readUshort(r,e),e+=2,i.readUshort(r,e),e+=2,i.readUshort(r,e),e+=2;for(var s=0;s<o;s++){var f=i.readUshort(r,e);e+=2;var u=i.readUshort(r,e);e+=2;var c=i.readShort(r,e);e+=2,f!=n&&(a.glyph1.push(f),a.rval.push({glyph2:[],vals:[]}));var p=a.rval[a.rval.length-1];p.glyph2.push(u),p.vals.push(c),n=f}return e},t.loca={},t.loca.parse=function(r,e,a,i){var n=t._bin,o=[],s=i.head.indexToLocFormat,f=i.maxp.numGlyphs+1;if(s==0)for(var u=0;u<f;u++)o.push(n.readUshort(r,e+(u<<1))<<1);if(s==1)for(u=0;u<f;u++)o.push(n.readUint(r,e+(u<<2)));return o},t.maxp={},t.maxp.parse=function(r,e,a){var i=t._bin,n={},o=i.readUint(r,e);return e+=4,n.numGlyphs=i.readUshort(r,e),e+=2,o==65536&&(n.maxPoints=i.readUshort(r,e),e+=2,n.maxContours=i.readUshort(r,e),e+=2,n.maxCompositePoints=i.readUshort(r,e),e+=2,n.maxCompositeContours=i.readUshort(r,e),e+=2,n.maxZones=i.readUshort(r,e),e+=2,n.maxTwilightPoints=i.readUshort(r,e),e+=2,n.maxStorage=i.readUshort(r,e),e+=2,n.maxFunctionDefs=i.readUshort(r,e),e+=2,n.maxInstructionDefs=i.readUshort(r,e),e+=2,n.maxStackElements=i.readUshort(r,e),e+=2,n.maxSizeOfInstructions=i.readUshort(r,e),e+=2,n.maxComponentElements=i.readUshort(r,e),e+=2,n.maxComponentDepth=i.readUshort(r,e),e+=2),n},t.name={},t.name.parse=function(r,e,a){var i=t._bin,n={};i.readUshort(r,e),e+=2;var o=i.readUshort(r,e);e+=2,i.readUshort(r,e);for(var s,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=e+=2,c=0;c<o;c++){var p=i.readUshort(r,e);e+=2;var g=i.readUshort(r,e);e+=2;var m=i.readUshort(r,e);e+=2;var G=i.readUshort(r,e);e+=2;var F=i.readUshort(r,e);e+=2;var k=i.readUshort(r,e);e+=2;var U,w=f[G],O=u+12*o+k;if(p==0)U=i.readUnicode(r,O,F/2);else if(p==3&&g==0)U=i.readUnicode(r,O,F/2);else if(g==0)U=i.readASCII(r,O,F);else if(g==1)U=i.readUnicode(r,O,F/2);else if(g==3)U=i.readUnicode(r,O,F/2);else{if(p!=1)throw"unknown encoding "+g+", platformID: "+p;U=i.readASCII(r,O,F),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var _="p"+p+","+m.toString(16);n[_]==null&&(n[_]={}),n[_][w!==void 0?w:G]=U,n[_]._lang=m}for(var C in n)if(n[C].postScriptName!=null&&n[C]._lang==1033)return n[C];for(var C in n)if(n[C].postScriptName!=null&&n[C]._lang==0)return n[C];for(var C in n)if(n[C].postScriptName!=null&&n[C]._lang==3084)return n[C];for(var C in n)if(n[C].postScriptName!=null)return n[C];for(var C in n){s=C;break}return console.debug("returning name table with languageID "+n[s]._lang),n[s]},t["OS/2"]={},t["OS/2"].parse=function(r,e,a){var i=t._bin.readUshort(r,e);e+=2;var n={};if(i==0)t["OS/2"].version0(r,e,n);else if(i==1)t["OS/2"].version1(r,e,n);else if(i==2||i==3||i==4)t["OS/2"].version2(r,e,n);else{if(i!=5)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(r,e,n)}return n},t["OS/2"].version0=function(r,e,a){var i=t._bin;return a.xAvgCharWidth=i.readShort(r,e),e+=2,a.usWeightClass=i.readUshort(r,e),e+=2,a.usWidthClass=i.readUshort(r,e),e+=2,a.fsType=i.readUshort(r,e),e+=2,a.ySubscriptXSize=i.readShort(r,e),e+=2,a.ySubscriptYSize=i.readShort(r,e),e+=2,a.ySubscriptXOffset=i.readShort(r,e),e+=2,a.ySubscriptYOffset=i.readShort(r,e),e+=2,a.ySuperscriptXSize=i.readShort(r,e),e+=2,a.ySuperscriptYSize=i.readShort(r,e),e+=2,a.ySuperscriptXOffset=i.readShort(r,e),e+=2,a.ySuperscriptYOffset=i.readShort(r,e),e+=2,a.yStrikeoutSize=i.readShort(r,e),e+=2,a.yStrikeoutPosition=i.readShort(r,e),e+=2,a.sFamilyClass=i.readShort(r,e),e+=2,a.panose=i.readBytes(r,e,10),e+=10,a.ulUnicodeRange1=i.readUint(r,e),e+=4,a.ulUnicodeRange2=i.readUint(r,e),e+=4,a.ulUnicodeRange3=i.readUint(r,e),e+=4,a.ulUnicodeRange4=i.readUint(r,e),e+=4,a.achVendID=[i.readInt8(r,e),i.readInt8(r,e+1),i.readInt8(r,e+2),i.readInt8(r,e+3)],e+=4,a.fsSelection=i.readUshort(r,e),e+=2,a.usFirstCharIndex=i.readUshort(r,e),e+=2,a.usLastCharIndex=i.readUshort(r,e),e+=2,a.sTypoAscender=i.readShort(r,e),e+=2,a.sTypoDescender=i.readShort(r,e),e+=2,a.sTypoLineGap=i.readShort(r,e),e+=2,a.usWinAscent=i.readUshort(r,e),e+=2,a.usWinDescent=i.readUshort(r,e),e+=2},t["OS/2"].version1=function(r,e,a){var i=t._bin;return e=t["OS/2"].version0(r,e,a),a.ulCodePageRange1=i.readUint(r,e),e+=4,a.ulCodePageRange2=i.readUint(r,e),e+=4},t["OS/2"].version2=function(r,e,a){var i=t._bin;return e=t["OS/2"].version1(r,e,a),a.sxHeight=i.readShort(r,e),e+=2,a.sCapHeight=i.readShort(r,e),e+=2,a.usDefault=i.readUshort(r,e),e+=2,a.usBreak=i.readUshort(r,e),e+=2,a.usMaxContext=i.readUshort(r,e),e+=2},t["OS/2"].version5=function(r,e,a){var i=t._bin;return e=t["OS/2"].version2(r,e,a),a.usLowerOpticalPointSize=i.readUshort(r,e),e+=2,a.usUpperOpticalPointSize=i.readUshort(r,e),e+=2},t.post={},t.post.parse=function(r,e,a){var i=t._bin,n={};return n.version=i.readFixed(r,e),e+=4,n.italicAngle=i.readFixed(r,e),e+=4,n.underlinePosition=i.readShort(r,e),e+=2,n.underlineThickness=i.readShort(r,e),e+=2,n},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(r,e){var a=r.cmap,i=-1;if(a.p0e4!=null?i=a.p0e4:a.p3e1!=null?i=a.p3e1:a.p1e0!=null?i=a.p1e0:a.p0e3!=null&&(i=a.p0e3),i==-1)throw"no familiar platform and encoding!";var n=a.tables[i];if(n.format==0)return e>=n.map.length?0:n.map[e];if(n.format==4){for(var o=-1,s=0;s<n.endCount.length;s++)if(e<=n.endCount[s]){o=s;break}return o==-1||n.startCount[o]>e?0:65535&(n.idRangeOffset[o]!=0?n.glyphIdArray[e-n.startCount[o]+(n.idRangeOffset[o]>>1)-(n.idRangeOffset.length-o)]:e+n.idDelta[o])}if(n.format==12){if(e>n.groups[n.groups.length-1][1])return 0;for(s=0;s<n.groups.length;s++){var f=n.groups[s];if(f[0]<=e&&e<=f[1])return f[2]+(e-f[0])}return 0}throw"unknown cmap table format "+n.format},t.U.glyphToPath=function(r,e){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[e]){var i=r.SVG.entries[e];return i==null?a:(typeof i=="string"&&(i=t.SVG.toPath(i),r.SVG.entries[e]=i),i)}if(r.CFF){var n={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},o=r.CFF,s=r.CFF.Private;if(o.ROS){for(var f=0;o.FDSelect[f+2]<=e;)f+=2;s=o.FDArray[o.FDSelect[f+1]].Private}t.U._drawCFF(r.CFF.CharStrings[e],n,o,s,a)}else r.glyf&&t.U._drawGlyf(e,r,a);return a},t.U._drawGlyf=function(r,e,a){var i=e.glyf[r];i==null&&(i=e.glyf[r]=t.glyf._parseGlyf(e,r)),i!=null&&(i.noc>-1?t.U._simpleGlyph(i,a):t.U._compoGlyph(i,e,a))},t.U._simpleGlyph=function(r,e){for(var a=0;a<r.noc;a++){for(var i=a==0?0:r.endPts[a-1]+1,n=r.endPts[a],o=i;o<=n;o++){var s=o==i?n:o-1,f=o==n?i:o+1,u=1&r.flags[o],c=1&r.flags[s],p=1&r.flags[f],g=r.xs[o],m=r.ys[o];if(o==i)if(u){if(!c){t.U.P.moveTo(e,g,m);continue}t.U.P.moveTo(e,r.xs[s],r.ys[s])}else c?t.U.P.moveTo(e,r.xs[s],r.ys[s]):t.U.P.moveTo(e,(r.xs[s]+g)/2,(r.ys[s]+m)/2);u?c&&t.U.P.lineTo(e,g,m):p?t.U.P.qcurveTo(e,g,m,r.xs[f],r.ys[f]):t.U.P.qcurveTo(e,g,m,(g+r.xs[f])/2,(m+r.ys[f])/2)}t.U.P.closePath(e)}},t.U._compoGlyph=function(r,e,a){for(var i=0;i<r.parts.length;i++){var n={cmds:[],crds:[]},o=r.parts[i];t.U._drawGlyf(o.glyphIndex,e,n);for(var s=o.m,f=0;f<n.crds.length;f+=2){var u=n.crds[f],c=n.crds[f+1];a.crds.push(u*s.a+c*s.b+s.tx),a.crds.push(u*s.c+c*s.d+s.ty)}for(f=0;f<n.cmds.length;f++)a.cmds.push(n.cmds[f])}},t.U._getGlyphClass=function(r,e){var a=t._lctf.getInterval(e,r);return a==-1?0:e[a+2]},t.U._applySubs=function(r,e,a,i){for(var n=r.length-e-1,o=0;o<a.tabs.length;o++)if(a.tabs[o]!=null){var s,f=a.tabs[o];if(!f.coverage||(s=t._lctf.coverageIndex(f.coverage,r[e]))!=-1){if(a.ltype==1)r[e],f.fmt==1?r[e]=r[e]+f.delta:r[e]=f.newg[s];else if(a.ltype==4)for(var u=f.vals[s],c=0;c<u.length;c++){var p=u[c],g=p.chain.length;if(!(g>n)){for(var m=!0,G=0,F=0;F<g;F++){for(;r[e+G+(1+F)]==-1;)G++;p.chain[F]!=r[e+G+(1+F)]&&(m=!1)}if(m){for(r[e]=p.nglyph,F=0;F<g+G;F++)r[e+F+1]=-1;break}}}else if(a.ltype==5&&f.fmt==2)for(var k=t._lctf.getInterval(f.cDef,r[e]),U=f.cDef[k+2],w=f.scset[U],O=0;O<w.length;O++){var _=w[O],C=_.input;if(!(C.length>n)){for(m=!0,F=0;F<C.length;F++){var W=t._lctf.getInterval(f.cDef,r[e+1+F]);if(k==-1&&f.cDef[W+2]!=C[F]){m=!1;break}}if(m){var M=_.substLookupRecords;for(c=0;c<M.length;c+=2)M[c],M[c+1]}}}else if(a.ltype==6&&f.fmt==3){if(!t.U._glsCovered(r,f.backCvg,e-f.backCvg.length)||!t.U._glsCovered(r,f.inptCvg,e)||!t.U._glsCovered(r,f.ahedCvg,e+f.inptCvg.length))continue;var J=f.lookupRec;for(O=0;O<J.length;O+=2){k=J[O];var y=i[J[O+1]];t.U._applySubs(r,e+k,y,i)}}}}},t.U._glsCovered=function(r,e,a){for(var i=0;i<e.length;i++)if(t._lctf.coverageIndex(e[i],r[a+i])==-1)return!1;return!0},t.U.glyphsToPath=function(r,e,a){for(var i={cmds:[],crds:[]},n=0,o=0;o<e.length;o++){var s=e[o];if(s!=-1){for(var f=o<e.length-1&&e[o+1]!=-1?e[o+1]:0,u=t.U.glyphToPath(r,s),c=0;c<u.crds.length;c+=2)i.crds.push(u.crds[c]+n),i.crds.push(u.crds[c+1]);for(a&&i.cmds.push(a),c=0;c<u.cmds.length;c++)i.cmds.push(u.cmds[c]);a&&i.cmds.push("X"),n+=r.hmtx.aWidth[s],o<e.length-1&&(n+=t.U.getPairAdjustment(r,s,f))}}return i},t.U.P={},t.U.P.moveTo=function(r,e,a){r.cmds.push("M"),r.crds.push(e,a)},t.U.P.lineTo=function(r,e,a){r.cmds.push("L"),r.crds.push(e,a)},t.U.P.curveTo=function(r,e,a,i,n,o,s){r.cmds.push("C"),r.crds.push(e,a,i,n,o,s)},t.U.P.qcurveTo=function(r,e,a,i,n){r.cmds.push("Q"),r.crds.push(e,a,i,n)},t.U.P.closePath=function(r){r.cmds.push("Z")},t.U._drawCFF=function(r,e,a,i,n){for(var o=e.stack,s=e.nStems,f=e.haveWidth,u=e.width,c=e.open,p=0,g=e.x,m=e.y,G=0,F=0,k=0,U=0,w=0,O=0,_=0,C=0,W=0,M=0,J={val:0,size:0};p<r.length;){t.CFF.getCharString(r,p,J);var y=J.val;if(p+=J.size,y=="o1"||y=="o18")o.length%2!=0&&!f&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,f=!0;else if(y=="o3"||y=="o23")o.length%2!=0&&!f&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,f=!0;else if(y=="o4")o.length>1&&!f&&(u=o.shift()+i.nominalWidthX,f=!0),c&&t.U.P.closePath(n),m+=o.pop(),t.U.P.moveTo(n,g,m),c=!0;else if(y=="o5")for(;o.length>0;)g+=o.shift(),m+=o.shift(),t.U.P.lineTo(n,g,m);else if(y=="o6"||y=="o7")for(var R=o.length,T=y=="o6",z=0;z<R;z++){var I=o.shift();T?g+=I:m+=I,T=!T,t.U.P.lineTo(n,g,m)}else if(y=="o8"||y=="o24"){R=o.length;for(var Z=0;Z+6<=R;)G=g+o.shift(),F=m+o.shift(),k=G+o.shift(),U=F+o.shift(),g=k+o.shift(),m=U+o.shift(),t.U.P.curveTo(n,G,F,k,U,g,m),Z+=6;y=="o24"&&(g+=o.shift(),m+=o.shift(),t.U.P.lineTo(n,g,m))}else{if(y=="o11")break;if(y=="o1234"||y=="o1235"||y=="o1236"||y=="o1237")y=="o1234"&&(F=m,k=(G=g+o.shift())+o.shift(),M=U=F+o.shift(),O=U,C=m,g=(_=(w=(W=k+o.shift())+o.shift())+o.shift())+o.shift(),t.U.P.curveTo(n,G,F,k,U,W,M),t.U.P.curveTo(n,w,O,_,C,g,m)),y=="o1235"&&(G=g+o.shift(),F=m+o.shift(),k=G+o.shift(),U=F+o.shift(),W=k+o.shift(),M=U+o.shift(),w=W+o.shift(),O=M+o.shift(),_=w+o.shift(),C=O+o.shift(),g=_+o.shift(),m=C+o.shift(),o.shift(),t.U.P.curveTo(n,G,F,k,U,W,M),t.U.P.curveTo(n,w,O,_,C,g,m)),y=="o1236"&&(G=g+o.shift(),F=m+o.shift(),k=G+o.shift(),M=U=F+o.shift(),O=U,_=(w=(W=k+o.shift())+o.shift())+o.shift(),C=O+o.shift(),g=_+o.shift(),t.U.P.curveTo(n,G,F,k,U,W,M),t.U.P.curveTo(n,w,O,_,C,g,m)),y=="o1237"&&(G=g+o.shift(),F=m+o.shift(),k=G+o.shift(),U=F+o.shift(),W=k+o.shift(),M=U+o.shift(),w=W+o.shift(),O=M+o.shift(),_=w+o.shift(),C=O+o.shift(),Math.abs(_-g)>Math.abs(C-m)?g=_+o.shift():m=C+o.shift(),t.U.P.curveTo(n,G,F,k,U,W,M),t.U.P.curveTo(n,w,O,_,C,g,m));else if(y=="o14"){if(o.length>0&&!f&&(u=o.shift()+a.nominalWidthX,f=!0),o.length==4){var ie=o.shift(),P=o.shift(),E=o.shift(),v=o.shift(),b=t.CFF.glyphBySE(a,E),S=t.CFF.glyphBySE(a,v);t.U._drawCFF(a.CharStrings[b],e,a,i,n),e.x=ie,e.y=P,t.U._drawCFF(a.CharStrings[S],e,a,i,n)}c&&(t.U.P.closePath(n),c=!1)}else if(y=="o19"||y=="o20")o.length%2!=0&&!f&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,f=!0,p+=s+7>>3;else if(y=="o21")o.length>2&&!f&&(u=o.shift()+i.nominalWidthX,f=!0),m+=o.pop(),g+=o.pop(),c&&t.U.P.closePath(n),t.U.P.moveTo(n,g,m),c=!0;else if(y=="o22")o.length>1&&!f&&(u=o.shift()+i.nominalWidthX,f=!0),g+=o.pop(),c&&t.U.P.closePath(n),t.U.P.moveTo(n,g,m),c=!0;else if(y=="o25"){for(;o.length>6;)g+=o.shift(),m+=o.shift(),t.U.P.lineTo(n,g,m);G=g+o.shift(),F=m+o.shift(),k=G+o.shift(),U=F+o.shift(),g=k+o.shift(),m=U+o.shift(),t.U.P.curveTo(n,G,F,k,U,g,m)}else if(y=="o26")for(o.length%2&&(g+=o.shift());o.length>0;)G=g,F=m+o.shift(),g=k=G+o.shift(),m=(U=F+o.shift())+o.shift(),t.U.P.curveTo(n,G,F,k,U,g,m);else if(y=="o27")for(o.length%2&&(m+=o.shift());o.length>0;)F=m,k=(G=g+o.shift())+o.shift(),U=F+o.shift(),g=k+o.shift(),m=U,t.U.P.curveTo(n,G,F,k,U,g,m);else if(y=="o10"||y=="o29"){var D=y=="o10"?i:a;if(o.length==0)console.debug("error: empty stack");else{var x=o.pop(),N=D.Subrs[x+D.Bias];e.x=g,e.y=m,e.nStems=s,e.haveWidth=f,e.width=u,e.open=c,t.U._drawCFF(N,e,a,i,n),g=e.x,m=e.y,s=e.nStems,f=e.haveWidth,u=e.width,c=e.open}}else if(y=="o30"||y=="o31"){var A=o.length,B=(Z=0,y=="o31");for(Z+=A-(R=-3&A);Z<R;)B?(F=m,k=(G=g+o.shift())+o.shift(),m=(U=F+o.shift())+o.shift(),R-Z==5?(g=k+o.shift(),Z++):g=k,B=!1):(G=g,F=m+o.shift(),k=G+o.shift(),U=F+o.shift(),g=k+o.shift(),R-Z==5?(m=U+o.shift(),Z++):m=U,B=!0),t.U.P.curveTo(n,G,F,k,U,g,m),Z+=4}else{if((y+"").charAt(0)=="o")throw console.debug("Unknown operation: "+y,r),y;o.push(y)}}}e.x=g,e.y=m,e.nStems=s,e.haveWidth=f,e.width=u,e.open=c};var d=t,h={Typr:d};return l.Typr=d,l.default=h,Object.defineProperty(l,"__esModule",{value:!0}),l}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function ha(){return function(l){var t=Uint8Array,d=Uint16Array,h=Uint32Array,r=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=function(y,R){for(var T=new d(31),z=0;z<31;++z)T[z]=R+=1<<y[z-1];var I=new h(T[30]);for(z=1;z<30;++z)for(var Z=T[z];Z<T[z+1];++Z)I[Z]=Z-T[z]<<5|z;return[T,I]},n=i(r,2),o=n[0],s=n[1];o[28]=258,s[258]=28;for(var f=i(e,0)[0],u=new d(32768),c=0;c<32768;++c){var p=(43690&c)>>>1|(21845&c)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,u[c]=((65280&p)>>>8|(255&p)<<8)>>>1}var g=function(y,R,T){for(var z=y.length,I=0,Z=new d(R);I<z;++I)++Z[y[I]-1];var ie,P=new d(R);for(I=0;I<R;++I)P[I]=P[I-1]+Z[I-1]<<1;if(T){ie=new d(1<<R);var E=15-R;for(I=0;I<z;++I)if(y[I])for(var v=I<<4|y[I],b=R-y[I],S=P[y[I]-1]++<<b,D=S|(1<<b)-1;S<=D;++S)ie[u[S]>>>E]=v}else for(ie=new d(z),I=0;I<z;++I)y[I]&&(ie[I]=u[P[y[I]-1]++]>>>15-y[I]);return ie},m=new t(288);for(c=0;c<144;++c)m[c]=8;for(c=144;c<256;++c)m[c]=9;for(c=256;c<280;++c)m[c]=7;for(c=280;c<288;++c)m[c]=8;var G=new t(32);for(c=0;c<32;++c)G[c]=5;var F=g(m,9,1),k=g(G,5,1),U=function(y){for(var R=y[0],T=1;T<y.length;++T)y[T]>R&&(R=y[T]);return R},w=function(y,R,T){var z=R/8|0;return(y[z]|y[z+1]<<8)>>(7&R)&T},O=function(y,R){var T=R/8|0;return(y[T]|y[T+1]<<8|y[T+2]<<16)>>(7&R)},_=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],C=function(y,R,T){var z=new Error(R||_[y]);if(z.code=y,Error.captureStackTrace&&Error.captureStackTrace(z,C),!T)throw z;return z},W=function(y,R,T){var z=y.length;if(!z||T&&!T.l&&z<5)return R||new t(0);var I=!R||T,Z=!T||T.i;T||(T={}),R||(R=new t(3*z));var ie,P=function(fe){var ke=R.length;if(fe>ke){var we=new t(Math.max(2*ke,fe));we.set(R),R=we}},E=T.f||0,v=T.p||0,b=T.b||0,S=T.l,D=T.d,x=T.m,N=T.n,A=8*z;do{if(!S){T.f=E=w(y,v,1);var B=w(y,v+1,3);if(v+=3,!B){var X=y[(q=((ie=v)/8|0)+(7&ie&&1)+4)-4]|y[q-3]<<8,$=q+X;if($>z){Z&&C(0);break}I&&P(b+X),R.set(y.subarray(q,$),b),T.b=b+=X,T.p=v=8*$;continue}if(B==1)S=F,D=k,x=9,N=5;else if(B==2){var H=w(y,v,31)+257,j=w(y,v+10,15)+4,pe=H+w(y,v+5,31)+1;v+=14;for(var ue=new t(pe),Q=new t(19),ee=0;ee<j;++ee)Q[a[ee]]=w(y,v+3*ee,7);v+=3*j;var se=U(Q),V=(1<<se)-1,re=g(Q,se,1);for(ee=0;ee<pe;){var q,L=re[w(y,v,V)];if(v+=15&L,(q=L>>>4)<16)ue[ee++]=q;else{var he=0,K=0;for(q==16?(K=3+w(y,v,3),v+=2,he=ue[ee-1]):q==17?(K=3+w(y,v,7),v+=3):q==18&&(K=11+w(y,v,127),v+=7);K--;)ue[ee++]=he}}var ne=ue.subarray(0,H),Y=ue.subarray(H);x=U(ne),N=U(Y),S=g(ne,x,1),D=g(Y,N,1)}else C(1);if(v>A){Z&&C(0);break}}I&&P(b+131072);for(var be=(1<<x)-1,te=(1<<N)-1,ae=v;;ae=v){var le=(he=S[O(y,v)&be])>>>4;if((v+=15&he)>A){Z&&C(0);break}if(he||C(2),le<256)R[b++]=le;else{if(le==256){ae=v,S=null;break}var de=le-254;if(le>264){var Se=r[ee=le-257];de=w(y,v,(1<<Se)-1)+o[ee],v+=Se}var De=D[O(y,v)&te],ge=De>>>4;if(De||C(3),v+=15&De,Y=f[ge],ge>3&&(Se=e[ge],Y+=O(y,v)&(1<<Se)-1,v+=Se),v>A){Z&&C(0);break}I&&P(b+131072);for(var me=b+de;b<me;b+=4)R[b]=R[b-Y],R[b+1]=R[b+1-Y],R[b+2]=R[b+2-Y],R[b+3]=R[b+3-Y];b=me}}T.l=S,T.p=ae,T.b=b,S&&(E=1,T.m=x,T.d=D,T.n=N)}while(!E);return b==R.length?R:function(fe,ke,we){(ke==null||ke<0)&&(ke=0),(we==null||we>fe.length)&&(we=fe.length);var Pe=new(fe instanceof d?d:fe instanceof h?h:t)(we-ke);return Pe.set(fe.subarray(ke,we)),Pe}(R,0,b)},M=new t(0),J=typeof TextDecoder<"u"&&new TextDecoder;try{J.decode(M,{stream:!0})}catch{}return l.convert_streams=function(y){var R=new DataView(y),T=0;function z(){var H=R.getUint16(T);return T+=2,H}function I(){var H=R.getUint32(T);return T+=4,H}function Z(H){X.setUint16($,H),$+=2}function ie(H){X.setUint32($,H),$+=4}for(var P={signature:I(),flavor:I(),length:I(),numTables:z(),reserved:z(),totalSfntSize:I(),majorVersion:z(),minorVersion:z(),metaOffset:I(),metaLength:I(),metaOrigLength:I(),privOffset:I(),privLength:I()},E=0;Math.pow(2,E)<=P.numTables;)E++;E--;for(var v=16*Math.pow(2,E),b=16*P.numTables-v,S=12,D=[],x=0;x<P.numTables;x++)D.push({tag:I(),offset:I(),compLength:I(),origLength:I(),origChecksum:I()}),S+=16;var N,A=new Uint8Array(12+16*D.length+D.reduce(function(H,j){return H+j.origLength+4},0)),B=A.buffer,X=new DataView(B),$=0;return ie(P.flavor),Z(P.numTables),Z(v),Z(E),Z(b),D.forEach(function(H){ie(H.tag),ie(H.origChecksum),ie(S),ie(H.origLength),H.outOffset=S,(S+=H.origLength)%4!=0&&(S+=4-S%4)}),D.forEach(function(H){var j,pe=y.slice(H.offset,H.offset+H.compLength);if(H.compLength!=H.origLength){var ue=new Uint8Array(H.origLength);j=new Uint8Array(pe,2),W(j,ue)}else ue=new Uint8Array(pe);A.set(ue,H.outOffset);var Q=0;(S=H.outOffset+H.origLength)%4!=0&&(Q=4-S%4),A.set(new Uint8Array(Q).buffer,H.outOffset+H.origLength),N=S+Q}),B.slice(0,N)},Object.defineProperty(l,"__esModule",{value:!0}),l}({}).convert_streams}function da(l,t){const d={M:2,L:2,Q:4,C:6,Z:0},h={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,e=2,a=4,i=8,n=16,o=32;let s;function f(_){if(!s){const C={R:e,L:r,D:a,C:n,U:o,T:i};s=new Map;for(let W in h){let M=0;h[W].split(",").forEach(J=>{let[y,R]=J.split("+");y=parseInt(y,36),R=R?parseInt(R,36):0,s.set(M+=y,C[W]);for(let T=R;T--;)s.set(++M,C[W])})}}return s.get(_)||o}const u=1,c=2,p=3,g=4,m=[null,"isol","init","fina","medi"];function G(_){const C=new Uint8Array(_.length);let W=o,M=u,J=-1;for(let y=0;y<_.length;y++){const R=_.codePointAt(y);let T=f(R)|0,z=u;T&i||(W&(r|a|n)?T&(e|a|n)?(z=p,(M===u||M===p)&&C[J]++):T&(r|o)&&(M===c||M===g)&&C[J]--:W&(e|o)&&(M===c||M===g)&&C[J]--,M=C[y]=z,W=T,J=y,R>65535&&y++)}return C}function F(_,C){const W=[];for(let J=0;J<C.length;J++){const y=C.codePointAt(J);y>65535&&J++,W.push(l.U.codeToGlyph(_,y))}const M=_.GSUB;if(M){const{lookupList:J,featureList:y}=M;let R;const T=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,z=[];y.forEach(I=>{if(T.test(I.tag))for(let Z=0;Z<I.tab.length;Z++){if(z[I.tab[Z]])continue;z[I.tab[Z]]=!0;const ie=J[I.tab[Z]],P=/^(isol|init|fina|medi)$/.test(I.tag);P&&!R&&(R=G(C));for(let E=0;E<W.length;E++)(!R||!P||m[R[E]]===I.tag)&&l.U._applySubs(W,E,ie,J)}})}return W}function k(_,C){const W=new Int16Array(C.length*3);let M=0;for(;M<C.length;M++){const T=C[M];if(T===-1)continue;W[M*3+2]=_.hmtx.aWidth[T];const z=_.GPOS;if(z){const I=z.lookupList;for(let Z=0;Z<I.length;Z++){const ie=I[Z];for(let P=0;P<ie.tabs.length;P++){const E=ie.tabs[P];if(ie.ltype===1){if(l._lctf.coverageIndex(E.coverage,T)!==-1&&E.pos){R(E.pos,M);break}}else if(ie.ltype===2){let v=null,b=J();if(b!==-1){const S=l._lctf.coverageIndex(E.coverage,C[b]);if(S!==-1){if(E.fmt===1){const D=E.pairsets[S];for(let x=0;x<D.length;x++)D[x].gid2===T&&(v=D[x])}else if(E.fmt===2){const D=l.U._getGlyphClass(C[b],E.classDef1),x=l.U._getGlyphClass(T,E.classDef2);v=E.matrix[D][x]}if(v){v.val1&&R(v.val1,b),v.val2&&R(v.val2,M);break}}}}else if(ie.ltype===4){const v=l._lctf.coverageIndex(E.markCoverage,T);if(v!==-1){const b=J(y),S=b===-1?-1:l._lctf.coverageIndex(E.baseCoverage,C[b]);if(S!==-1){const D=E.markArray[v],x=E.baseArray[S][D.markClass];W[M*3]=x.x-D.x+W[b*3]-W[b*3+2],W[M*3+1]=x.y-D.y+W[b*3+1];break}}}else if(ie.ltype===6){const v=l._lctf.coverageIndex(E.mark1Coverage,T);if(v!==-1){const b=J();if(b!==-1){const S=C[b];if(U(_,S)===3){const D=l._lctf.coverageIndex(E.mark2Coverage,S);if(D!==-1){const x=E.mark1Array[v],N=E.mark2Array[D][x.markClass];W[M*3]=N.x-x.x+W[b*3]-W[b*3+2],W[M*3+1]=N.y-x.y+W[b*3+1];break}}}}}}}}else if(_.kern&&!_.cff){const I=J();if(I!==-1){const Z=_.kern.glyph1.indexOf(C[I]);if(Z!==-1){const ie=_.kern.rval[Z].glyph2.indexOf(T);ie!==-1&&(W[I*3+2]+=_.kern.rval[Z].vals[ie])}}}}return W;function J(T){for(let z=M-1;z>=0;z--)if(C[z]!==-1&&(!T||T(C[z])))return z;return-1}function y(T){return U(_,T)===1}function R(T,z){for(let I=0;I<3;I++)W[z*3+I]+=T[I]||0}}function U(_,C){const W=_.GDEF&&_.GDEF.glyphClassDef;return W?l.U._getGlyphClass(C,W):0}function w(..._){for(let C=0;C<_.length;C++)if(typeof _[C]=="number")return _[C]}function O(_){const C=Object.create(null),W=_["OS/2"],M=_.hhea,J=_.head.unitsPerEm,y=w(W&&W.sTypoAscender,M&&M.ascender,J),R={unitsPerEm:J,ascender:y,descender:w(W&&W.sTypoDescender,M&&M.descender,0),capHeight:w(W&&W.sCapHeight,y),xHeight:w(W&&W.sxHeight,y),lineGap:w(W&&W.sTypoLineGap,M&&M.lineGap),supportsCodePoint(T){return l.U.codeToGlyph(_,T)>0},forEachGlyph(T,z,I,Z){let ie=0;const P=1/R.unitsPerEm*z,E=F(_,T);let v=0;const b=k(_,E);return E.forEach((S,D)=>{if(S!==-1){let x=C[S];if(!x){const{cmds:N,crds:A}=l.U.glyphToPath(_,S);let B="",X=0;for(let ue=0,Q=N.length;ue<Q;ue++){const ee=d[N[ue]];B+=N[ue];for(let se=1;se<=ee;se++)B+=(se>1?",":"")+A[X++]}let $,H,j,pe;if(A.length){$=H=1/0,j=pe=-1/0;for(let ue=0,Q=A.length;ue<Q;ue+=2){let ee=A[ue],se=A[ue+1];ee<$&&($=ee),se<H&&(H=se),ee>j&&(j=ee),se>pe&&(pe=se)}}else $=j=H=pe=0;x=C[S]={index:S,advanceWidth:_.hmtx.aWidth[S],xMin:$,yMin:H,xMax:j,yMax:pe,path:B}}Z.call(null,x,ie+b[D*3]*P,b[D*3+1]*P,v),ie+=b[D*3+2]*P,I&&(ie+=I*z)}v+=T.codePointAt(v)>65535?2:1}),ie}};return R}return function(C){const W=new Uint8Array(C,0,4),M=l._bin.readASCII(W,0,4);if(M==="wOFF")C=t(C);else if(M==="wOF2")throw new Error("woff2 fonts not supported");return O(l.parse(C)[0])}}const va=fr({name:"Typr Font Parser",dependencies:[ca,ha,da],init(l,t,d){const h=l(),r=t();return d(h,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function pa(){return function(l){var t=function(){this.buckets=new Map};t.prototype.add=function(k){var U=k>>5;this.buckets.set(U,(this.buckets.get(U)||0)|1<<(31&k))},t.prototype.has=function(k){var U=this.buckets.get(k>>5);return U!==void 0&&(U&1<<(31&k))!=0},t.prototype.serialize=function(){var k=[];return this.buckets.forEach(function(U,w){k.push((+w).toString(36)+":"+U.toString(36))}),k.join(",")},t.prototype.deserialize=function(k){var U=this;this.buckets.clear(),k.split(",").forEach(function(w){var O=w.split(":");U.buckets.set(parseInt(O[0],36),parseInt(O[1],36))})};var d=Math.pow(2,8),h=d-1,r=~h;function e(k){var U=function(O){return O&r}(k).toString(16),w=function(O){return(O&r)+d-1}(k).toString(16);return"codepoint-index/plane"+(k>>16)+"/"+U+"-"+w+".json"}function a(k,U){var w=k&h,O=U.codePointAt(w/6|0);return((O=(O||48)-48)&1<<w%6)!=0}function i(k,U){var w;(w=k,w.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(O){return O.split("-").map(function(_){return parseInt(_.trim(),16)})})).forEach(function(O){var _=O[0],C=O[1];C===void 0&&(C=_),U(_,C)})}function n(k,U){i(k,function(w,O){for(var _=w;_<=O;_++)U(_)})}var o={},s={},f=new WeakMap,u="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function c(k){var U=f.get(k);return U||(U=new t,n(k.ranges,function(w){return U.add(w)}),f.set(k,U)),U}var p,g=new Map;function m(k,U,w){return k[U]?U:k[w]?w:function(O){for(var _ in O)return _}(k)}function G(k,U){var w=U;if(!k.includes(w)){w=1/0;for(var O=0;O<k.length;O++)Math.abs(k[O]-U)<Math.abs(w-U)&&(w=k[O])}return w}function F(k){return p||(p=new Set,n("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(U){p.add(U)})),p.has(k)}return l.CodePointSet=t,l.clearCache=function(){o={},s={}},l.getFontsForString=function(k,U){U===void 0&&(U={});var w,O=U.lang;O===void 0&&(O=/\p{Script=Hangul}/u.test(w=k)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(w)?"ja":"en");var _=U.category;_===void 0&&(_="sans-serif");var C=U.style;C===void 0&&(C="normal");var W=U.weight;W===void 0&&(W=400);var M=(U.dataUrl||u).replace(/\/$/g,""),J=new Map,y=new Uint8Array(k.length),R={},T={},z=new Array(k.length),I=new Map,Z=!1;function ie(v){var b=g.get(v);return b||(b=fetch(M+"/"+v).then(function(S){if(!S.ok)throw new Error(S.statusText);return S.json().then(function(D){if(!Array.isArray(D)||D[0]!==1)throw new Error("Incorrect schema version; need 1, got "+D[0]);return D[1]})}).catch(function(S){if(M!==u)return Z||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+M+'", trying default CDN. '+S.message),Z=!0),M=u,g.delete(v),ie(v);throw S}),g.set(v,b)),b}for(var P=function(v){var b=k.codePointAt(v),S=e(b);z[v]=S,o[S]||I.has(S)||I.set(S,ie(S).then(function(D){o[S]=D})),b>65535&&(v++,E=v)},E=0;E<k.length;E++)P(E);return Promise.all(I.values()).then(function(){I.clear();for(var v=function(S){var D=k.codePointAt(S),x=null,N=o[z[S]],A=void 0;for(var B in N){var X=T[B];if(X===void 0&&(X=T[B]=new RegExp(B).test(O||"en")),X){for(var $ in A=B,N[B])if(a(D,N[B][$])){x=$;break}break}}if(!x){e:for(var H in N)if(H!==A){for(var j in N[H])if(a(D,N[H][j])){x=j;break e}}}x||(console.debug("No font coverage for U+"+D.toString(16)),x="latin"),z[S]=x,s[x]||I.has(x)||I.set(x,ie("font-meta/"+x+".json").then(function(pe){s[x]=pe})),D>65535&&(S++,b=S)},b=0;b<k.length;b++)v(b);return Promise.all(I.values())}).then(function(){for(var v,b=null,S=0;S<k.length;S++){var D=k.codePointAt(S);if(b&&(F(D)||c(b).has(D)))y[S]=y[S-1];else{b=s[z[S]];var x=R[b.id];if(!x){var N=b.typeforms,A=m(N,_,"sans-serif"),B=m(N[A],C,"normal"),X=G((v=N[A])===null||v===void 0?void 0:v[B],W);x=R[b.id]=M+"/font-files/"+b.id+"/"+A+"."+B+"."+X+".woff"}var $=J.get(x);$==null&&($=J.size,J.set(x,$)),y[S]=$}D>65535&&(S++,y[S]=y[S-1])}return{fontUrls:Array.from(J.keys()),chars:y}})},Object.defineProperty(l,"__esModule",{value:!0}),l}({})}function ga(l,t){const d=Object.create(null),h=Object.create(null);function r(a,i){const n=o=>{console.error(`Failure loading font ${a}`,o)};try{const o=new XMLHttpRequest;o.open("get",a,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status>=400)n(new Error(o.statusText));else if(o.status>0)try{const s=l(o.response);s.src=a,i(s)}catch(s){n(s)}},o.onerror=n,o.send()}catch(o){n(o)}}function e(a,i){let n=d[a];n?i(n):h[a]?h[a].push(i):(h[a]=[i],r(a,o=>{o.src=a,d[a]=o,h[a].forEach(s=>s(o)),delete h[a]}))}return function(a,i,{lang:n,fonts:o=[],style:s="normal",weight:f="normal",unicodeFontsURL:u}={}){const c=new Uint8Array(a.length),p=[];a.length||F();const g=new Map,m=[];if(s!=="italic"&&(s="normal"),typeof f!="number"&&(f=f==="bold"?700:400),o&&!Array.isArray(o)&&(o=[o]),o=o.slice().filter(U=>!U.lang||U.lang.test(n)).reverse(),o.length){let _=0;(function C(W=0){for(let M=W,J=a.length;M<J;M++){const y=a.codePointAt(M);if(_===1&&p[c[M-1]].supportsCodePoint(y)||M>0&&/\s/.test(a[M]))c[M]=c[M-1],_===2&&(m[m.length-1][1]=M);else for(let R=c[M],T=o.length;R<=T;R++)if(R===T){const z=_===2?m[m.length-1]:m[m.length]=[M,M];z[1]=M,_=2}else{c[M]=R;const{src:z,unicodeRange:I}=o[R];if(!I||k(y,I)){const Z=d[z];if(!Z){e(z,()=>{C(M)});return}if(Z.supportsCodePoint(y)){let ie=g.get(Z);typeof ie!="number"&&(ie=p.length,p.push(Z),g.set(Z,ie)),c[M]=ie,_=1;break}}}y>65535&&M+1<J&&(c[M+1]=c[M],M++,_===2&&(m[m.length-1][1]=M))}G()})()}else m.push([0,a.length-1]),G();function G(){if(m.length){const U=m.map(w=>a.substring(w[0],w[1]+1)).join(`
`);t.getFontsForString(U,{lang:n||void 0,style:s,weight:f,dataUrl:u}).then(({fontUrls:w,chars:O})=>{const _=p.length;let C=0;m.forEach(M=>{for(let J=0,y=M[1]-M[0];J<=y;J++)c[M[0]+J]=O[C++]+_;C++});let W=0;w.forEach((M,J)=>{e(M,y=>{p[J+_]=y,++W===w.length&&F()})})})}else F()}function F(){i({chars:c,fonts:p})}function k(U,w){for(let O=0;O<w.length;O++){const[_,C=_]=w[O];if(_<=U&&U<=C)return!0}return!1}}}const ma=fr({name:"FontResolver",dependencies:[ga,va,pa],init(l,t,d){return l(t,d())}});function ya(l,t){const h=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",e=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:p,lang:g,fonts:m,style:G,weight:F,preResolvedFonts:k,unicodeFontsURL:U},w){const O=({chars:_,fonts:C})=>{let W,M;const J=[];for(let y=0;y<_.length;y++)_[y]!==M?(M=_[y],J.push(W={start:y,end:y,fontObj:C[_[y]]})):W.end=y;w(J)};k?O(k):l(p,O,{lang:g,fonts:m,style:G,weight:F,unicodeFontsURL:U})}function i({text:p="",font:g,lang:m,sdfGlyphSize:G=64,fontSize:F=400,fontWeight:k=1,fontStyle:U="normal",letterSpacing:w=0,lineHeight:O="normal",maxWidth:_=1/0,direction:C,textAlign:W="left",textIndent:M=0,whiteSpace:J="normal",overflowWrap:y="normal",anchorX:R=0,anchorY:T=0,metricsOnly:z=!1,unicodeFontsURL:I,preResolvedFonts:Z=null,includeCaretPositions:ie=!1,chunkedBoundsSize:P=8192,colorRanges:E=null},v){const b=f(),S={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),F=+F,w=+w,_=+_,O=O||"normal",M=+M,a({text:p,lang:m,style:U,weight:k,fonts:typeof g=="string"?[{src:g}]:g,unicodeFontsURL:I,preResolvedFonts:Z},D=>{S.fontLoad=f()-b;const x=isFinite(_);let N=null,A=null,B=null,X=null,$=null,H=null,j=null,pe=null,ue=0,Q=0,ee=J!=="nowrap";const se=new Map,V=f();let re=M,q=0,L=new u;const he=[L];D.forEach(te=>{const{fontObj:ae}=te,{ascender:le,descender:de,unitsPerEm:Se,lineGap:De,capHeight:ge,xHeight:me}=ae;let fe=se.get(ae);if(!fe){const ce=F/Se,Ue=O==="normal"?(le-de+De)*ce:O*F,Ye=(Ue-(le-de)*ce)/2,xe=Math.min(Ue,(le-de)*ce),ye=(le+de)/2*ce+xe/2;fe={index:se.size,src:ae.src,fontObj:ae,fontSizeMult:ce,unitsPerEm:Se,ascender:le*ce,descender:de*ce,capHeight:ge*ce,xHeight:me*ce,lineHeight:Ue,baseline:-Ye-le*ce,caretTop:ye,caretBottom:ye-xe},se.set(ae,fe)}const{fontSizeMult:ke}=fe,we=p.slice(te.start,te.end+1);let Pe,Te;ae.forEachGlyph(we,F,w,(ce,Ue,Ye,xe)=>{Ue+=q,xe+=te.start,Pe=Ue,Te=ce;const ye=p.charAt(xe),Ae=ce.advanceWidth*ke,Fe=L.count;let ve;if("isEmpty"in ce||(ce.isWhitespace=!!ye&&new RegExp(r).test(ye),ce.canBreakAfter=!!ye&&e.test(ye),ce.isEmpty=ce.xMin===ce.xMax||ce.yMin===ce.yMax||h.test(ye)),!ce.isWhitespace&&!ce.isEmpty&&Q++,ee&&x&&!ce.isWhitespace&&Ue+Ae+re>_&&Fe){if(L.glyphAt(Fe-1).glyphObj.canBreakAfter)ve=new u,re=-Ue;else for(let Ge=Fe;Ge--;)if(Ge===0&&y==="break-word"){ve=new u,re=-Ue;break}else if(L.glyphAt(Ge).glyphObj.canBreakAfter){ve=L.splitAt(Ge+1);const Oe=ve.glyphAt(0).x;re-=Oe;for(let Ee=ve.count;Ee--;)ve.glyphAt(Ee).x-=Oe;break}ve&&(L.isSoftWrapped=!0,L=ve,he.push(L),ue=_)}let Ce=L.glyphAt(L.count);Ce.glyphObj=ce,Ce.x=Ue+re,Ce.y=Ye,Ce.width=Ae,Ce.charIndex=xe,Ce.fontData=fe,ye===`
`&&(L=new u,he.push(L),re=-(Ue+Ae+w*F)+M)}),q=Pe+Te.advanceWidth*ke+w*F});let K=0;he.forEach(te=>{let ae=!0;for(let le=te.count;le--;){const de=te.glyphAt(le);ae&&!de.glyphObj.isWhitespace&&(te.width=de.x+de.width,te.width>ue&&(ue=te.width),ae=!1);let{lineHeight:Se,capHeight:De,xHeight:ge,baseline:me}=de.fontData;Se>te.lineHeight&&(te.lineHeight=Se);const fe=me-te.baseline;fe<0&&(te.baseline+=fe,te.cap+=fe,te.ex+=fe),te.cap=Math.max(te.cap,te.baseline+De),te.ex=Math.max(te.ex,te.baseline+ge)}te.baseline-=K,te.cap-=K,te.ex-=K,K+=te.lineHeight});let ne=0,Y=0;if(R&&(typeof R=="number"?ne=-R:typeof R=="string"&&(ne=-ue*(R==="left"?0:R==="center"?.5:R==="right"?1:o(R)))),T&&(typeof T=="number"?Y=-T:typeof T=="string"&&(Y=T==="top"?0:T==="top-baseline"?-he[0].baseline:T==="top-cap"?-he[0].cap:T==="top-ex"?-he[0].ex:T==="middle"?K/2:T==="bottom"?K:T==="bottom-baseline"?-he[he.length-1].baseline:o(T)*K)),!z){const te=t.getEmbeddingLevels(p,C);N=new Uint16Array(Q),A=new Uint8Array(Q),B=new Float32Array(Q*2),X={},j=[1/0,1/0,-1/0,-1/0],pe=[],ie&&(H=new Float32Array(p.length*4)),E&&($=new Uint8Array(Q*3));let ae=0,le=-1,de=-1,Se,De;if(he.forEach((ge,me)=>{let{count:fe,width:ke}=ge;if(fe>0){let we=0;for(let xe=fe;xe--&&ge.glyphAt(xe).glyphObj.isWhitespace;)we++;let Pe=0,Te=0;if(W==="center")Pe=(ue-ke)/2;else if(W==="right")Pe=ue-ke;else if(W==="justify"&&ge.isSoftWrapped){let xe=0;for(let ye=fe-we;ye--;)ge.glyphAt(ye).glyphObj.isWhitespace&&xe++;Te=(ue-ke)/xe}if(Te||Pe){let xe=0;for(let ye=0;ye<fe;ye++){let Ae=ge.glyphAt(ye);const Fe=Ae.glyphObj;Ae.x+=Pe+xe,Te!==0&&Fe.isWhitespace&&ye<fe-we&&(xe+=Te,Ae.width+=Te)}}const ce=t.getReorderSegments(p,te,ge.glyphAt(0).charIndex,ge.glyphAt(ge.count-1).charIndex);for(let xe=0;xe<ce.length;xe++){const[ye,Ae]=ce[xe];let Fe=1/0,ve=-1/0;for(let Ce=0;Ce<fe;Ce++)if(ge.glyphAt(Ce).charIndex>=ye){let Ge=Ce,Oe=Ce;for(;Oe<fe;Oe++){let Ee=ge.glyphAt(Oe);if(Ee.charIndex>Ae)break;Oe<fe-we&&(Fe=Math.min(Fe,Ee.x),ve=Math.max(ve,Ee.x+Ee.width))}for(let Ee=Ge;Ee<Oe;Ee++){const We=ge.glyphAt(Ee);We.x=ve-(We.x+We.width-Fe)}break}}let Ue;const Ye=xe=>Ue=xe;for(let xe=0;xe<fe;xe++){const ye=ge.glyphAt(xe);Ue=ye.glyphObj;const Ae=Ue.index,Fe=te.levels[ye.charIndex]&1;if(Fe){const ve=t.getMirroredCharacter(p[ye.charIndex]);ve&&ye.fontData.fontObj.forEachGlyph(ve,0,0,Ye)}if(ie){const{charIndex:ve,fontData:Ce}=ye,Ge=ye.x+ne,Oe=ye.x+ye.width+ne;H[ve*4]=Fe?Oe:Ge,H[ve*4+1]=Fe?Ge:Oe,H[ve*4+2]=ge.baseline+Ce.caretBottom+Y,H[ve*4+3]=ge.baseline+Ce.caretTop+Y;const Ee=ve-le;Ee>1&&s(H,le,Ee),le=ve}if(E){const{charIndex:ve}=ye;for(;ve>de;)de++,E.hasOwnProperty(de)&&(De=E[de])}if(!Ue.isWhitespace&&!Ue.isEmpty){const ve=ae++,{fontSizeMult:Ce,src:Ge,index:Oe}=ye.fontData,Ee=X[Ge]||(X[Ge]={});Ee[Ae]||(Ee[Ae]={path:Ue.path,pathBounds:[Ue.xMin,Ue.yMin,Ue.xMax,Ue.yMax]});const We=ye.x+ne,Je=ye.y+ge.baseline+Y;B[ve*2]=We,B[ve*2+1]=Je;const He=We+Ue.xMin*Ce,Ke=Je+Ue.yMin*Ce,qe=We+Ue.xMax*Ce,Xe=Je+Ue.yMax*Ce;He<j[0]&&(j[0]=He),Ke<j[1]&&(j[1]=Ke),qe>j[2]&&(j[2]=qe),Xe>j[3]&&(j[3]=Xe),ve%P===0&&(Se={start:ve,end:ve,rect:[1/0,1/0,-1/0,-1/0]},pe.push(Se)),Se.end++;const Le=Se.rect;if(He<Le[0]&&(Le[0]=He),Ke<Le[1]&&(Le[1]=Ke),qe>Le[2]&&(Le[2]=qe),Xe>Le[3]&&(Le[3]=Xe),N[ve]=Ae,A[ve]=Oe,E){const $e=ve*3;$[$e]=De>>16&255,$[$e+1]=De>>8&255,$[$e+2]=De&255}}}}}),H){const ge=p.length-le;ge>1&&s(H,le,ge)}}const be=[];se.forEach(({index:te,src:ae,unitsPerEm:le,ascender:de,descender:Se,lineHeight:De,capHeight:ge,xHeight:me})=>{be[te]={src:ae,unitsPerEm:le,ascender:de,descender:Se,lineHeight:De,capHeight:ge,xHeight:me}}),S.typesetting=f()-V,v({glyphIds:N,glyphFontIndices:A,glyphPositions:B,glyphData:X,fontData:be,caretPositions:H,glyphColors:$,chunkedBounds:pe,fontSize:F,topBaseline:Y+he[0].baseline,blockBounds:[ne,Y-K,ne+ue,Y],visibleBounds:j,timings:S})})}function n(p,g){i({...p,metricsOnly:!0},m=>{const[G,F,k,U]=m.blockBounds;g({width:k-G,height:U-F})})}function o(p){let g=p.match(/^([\d.]+)%$/),m=g?parseFloat(g[1]):NaN;return isNaN(m)?0:m/100}function s(p,g,m){const G=p[g*4],F=p[g*4+1],k=p[g*4+2],U=p[g*4+3],w=(F-G)/m;for(let O=0;O<m;O++){const _=(g+O)*4;p[_]=G+w*O,p[_+1]=G+w*(O+1),p[_+2]=k,p[_+3]=U}}function f(){return(self.performance||Date).now()}function u(){this.data=[]}const c=["glyphObj","x","y","width","charIndex","fontData"];return u.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/c.length)},glyphAt(p){let g=u.flyweight;return g.data=this.data,g.index=p,g},splitAt(p){let g=new u;return g.data=this.data.splice(p*c.length),g}},u.flyweight=c.reduce((p,g,m,G)=>(Object.defineProperty(p,g,{get(){return this.data[this.index*c.length+m]},set(F){this.data[this.index*c.length+m]=F}}),p),{data:null,index:0}),{typeset:i,measure:n}}const rr=()=>(self.performance||Date).now(),Vr=vn();let en;function ba(l,t,d,h,r,e,a,i,n,o,s=!0){return s?xa(l,t,d,h,r,e,a,i,n,o).then(null,f=>(en||(console.warn("WebGL SDF generation failed, falling back to JS",f),en=!0),tn(l,t,d,h,r,e,a,i,n,o))):tn(l,t,d,h,r,e,a,i,n,o)}const Nr=[],Ua=5;let Ut=0;function gn(){const l=rr();for(;Nr.length&&rr()-l<Ua;)Nr.shift()();Ut=Nr.length?setTimeout(gn,0):0}const xa=(...l)=>new Promise((t,d)=>{Nr.push(()=>{const h=rr();try{Vr.webgl.generateIntoCanvas(...l),t({timing:rr()-h})}catch(r){d(r)}}),Ut||(Ut=setTimeout(gn,0))}),_a=4,Sa=2e3,rn={};let Ta=0;function tn(l,t,d,h,r,e,a,i,n,o){const s="TroikaTextSDFGenerator_JS_"+Ta++%_a;let f=rn[s];return f||(f=rn[s]={workerModule:fr({name:s,workerId:s,dependencies:[vn,rr],init(u,c){const p=u().javascript.generate;return function(...g){const m=c();return{textureData:p(...g),timing:c()-m}}},getTransferables(u){return[u.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(l,t,d,h,r,e).then(({textureData:u,timing:c})=>{const p=rr(),g=new Uint8Array(u.length*4);for(let m=0;m<u.length;m++)g[m*4+o]=u[m];return Vr.webglUtils.renderImageData(a,g,i,n,l,t,1<<3-o),c+=rr()-p,--f.requests===0&&(f.idleTimer=setTimeout(()=>{ra(s)},Sa)),{timing:c}})}function ka(l){l._warm||(Vr.webgl.isSupported(l),l._warm=!0)}const wa=Vr.webglUtils.resizeWebGLCanvasWithoutClearing,sr={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},Fa=new zr;function ir(){return(self.performance||Date).now()}const nn=Object.create(null);function mn(l,t){l=Aa({},l);const d=ir(),{defaultFontURL:h}=sr,r=[];if(h&&r.push({label:"default",src:an(h)}),l.font&&r.push({label:"user",src:an(l.font)}),l.font=r,l.text=""+l.text,l.sdfGlyphSize=l.sdfGlyphSize||sr.sdfGlyphSize,l.unicodeFontsURL=l.unicodeFontsURL||sr.unicodeFontsURL,l.colorRanges!=null){let c={};for(let p in l.colorRanges)if(l.colorRanges.hasOwnProperty(p)){let g=l.colorRanges[p];typeof g!="number"&&(g=Fa.set(g).getHex()),c[p]=g}l.colorRanges=c}Object.freeze(l);const{textureWidth:e,sdfExponent:a}=sr,{sdfGlyphSize:i}=l,n=e/i*4;let o=nn[i];if(!o){const c=document.createElement("canvas");c.width=e,c.height=i*256/n,o=nn[i]={glyphCount:0,sdfGlyphSize:i,sdfCanvas:c,sdfTexture:new Pn(c,void 0,void 0,void 0,Yt,Yt),contextLost:!1,glyphsByFont:new Map},o.sdfTexture.generateMipmaps=!1,Ca(o)}const{sdfTexture:s,sdfCanvas:f}=o;Un(l).then(c=>{const{glyphIds:p,glyphFontIndices:g,fontData:m,glyphPositions:G,fontSize:F,timings:k}=c,U=[],w=new Float32Array(p.length*4);let O=0,_=0;const C=ir(),W=m.map(T=>{let z=o.glyphsByFont.get(T.src);return z||o.glyphsByFont.set(T.src,z=new Map),z});p.forEach((T,z)=>{const I=g[z],{src:Z,unitsPerEm:ie}=m[I];let P=W[I].get(T);if(!P){const{path:D,pathBounds:x}=c.glyphData[Z][T],N=Math.max(x[2]-x[0],x[3]-x[1])/i*(sr.sdfMargin*i+.5),A=o.glyphCount++,B=[x[0]-N,x[1]-N,x[2]+N,x[3]+N];W[I].set(T,P={path:D,atlasIndex:A,sdfViewBox:B}),U.push(P)}const{sdfViewBox:E}=P,v=G[_++],b=G[_++],S=F/ie;w[O++]=v+E[0]*S,w[O++]=b+E[1]*S,w[O++]=v+E[2]*S,w[O++]=b+E[3]*S,p[z]=P.atlasIndex}),k.quads=(k.quads||0)+(ir()-C);const M=ir();k.sdf={};const J=f.height,y=Math.ceil(o.glyphCount/n),R=Math.pow(2,Math.ceil(Math.log2(y*i)));R>J&&(console.info(`Increasing SDF texture size ${J}->${R}`),wa(f,e,R),s.dispose()),Promise.all(U.map(T=>yn(T,o,l.gpuAccelerateSDF).then(({timing:z})=>{k.sdf[T.atlasIndex]=z}))).then(()=>{U.length&&!o.contextLost&&(bn(o),s.needsUpdate=!0),k.sdfTotal=ir()-M,k.total=ir()-d,t(Object.freeze({parameters:l,sdfTexture:s,sdfGlyphSize:i,sdfExponent:a,glyphBounds:w,glyphAtlasIndices:p,glyphColors:c.glyphColors,caretPositions:c.caretPositions,chunkedBounds:c.chunkedBounds,ascender:c.ascender,descender:c.descender,lineHeight:c.lineHeight,capHeight:c.capHeight,xHeight:c.xHeight,topBaseline:c.topBaseline,blockBounds:c.blockBounds,visibleBounds:c.visibleBounds,timings:c.timings}))})}),Promise.resolve().then(()=>{o.contextLost||ka(f)})}function yn({path:l,atlasIndex:t,sdfViewBox:d},{sdfGlyphSize:h,sdfCanvas:r,contextLost:e},a){if(e)return Promise.resolve({timing:-1});const{textureWidth:i,sdfExponent:n}=sr,o=Math.max(d[2]-d[0],d[3]-d[1]),s=Math.floor(t/4),f=s%(i/h)*h,u=Math.floor(s/(i/h))*h,c=t%4;return ba(h,h,l,d,o,n,r,f,u,c,a)}function Ca(l){const t=l.sdfCanvas;t.addEventListener("webglcontextlost",d=>{console.log("Context Lost",d),d.preventDefault(),l.contextLost=!0}),t.addEventListener("webglcontextrestored",d=>{console.log("Context Restored",d),l.contextLost=!1;const h=[];l.glyphsByFont.forEach(r=>{r.forEach(e=>{h.push(yn(e,l,!0))})}),Promise.all(h).then(()=>{bn(l),l.sdfTexture.needsUpdate=!0})})}function Da({font:l,characters:t,sdfGlyphSize:d},h){let r=Array.isArray(t)?t.join(`
`):""+t;mn({font:l,sdfGlyphSize:d,text:r},h)}function Aa(l,t){for(let d in t)t.hasOwnProperty(d)&&(l[d]=t[d]);return l}let Pr;function an(l){return Pr||(Pr=typeof document>"u"?{}:document.createElement("a")),Pr.href=l,Pr.href}function bn(l){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:d}=l,{width:h,height:r}=t,e=l.sdfCanvas.getContext("webgl");let a=d.image.data;(!a||a.length!==h*r*4)&&(a=new Uint8Array(h*r*4),d.image={width:h,height:r,data:a},d.flipY=!1,d.isDataTexture=!0),e.readPixels(0,0,h,r,e.RGBA,e.UNSIGNED_BYTE,a)}}const Ea=fr({name:"Typesetter",dependencies:[ya,ma,na],init(l,t,d){return l(t,d())}}),Un=fr({name:"Typesetter",dependencies:[Ea],init(l){return function(t){return new Promise(d=>{l.typeset(t,d)})}},getTransferables(l){const t=[];for(let d in l)l[d]&&l[d].buffer&&t.push(l[d].buffer);return t}});Un.onMainThread;const on={};function Ma(l){let t=on[l];return t||(t=on[l]=new St(1,1,l,l).translate(.5,.5,0)),t}const Ra="aTroikaGlyphBounds",sn="aTroikaGlyphIndex",Oa="aTroikaGlyphColor";class Ga extends Bn{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new In,this.boundingBox=new cn}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let d=Ma(t);["position","normal","uv"].forEach(h=>{this.attributes[h]=d.attributes[h].clone()}),this.setIndex(d.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,d,h,r,e){this.updateAttributeData(Ra,t,4),this.updateAttributeData(sn,d,1),this.updateAttributeData(Oa,e,3),this._blockBounds=h,this._chunkedBounds=r,this.instanceCount=d.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:d,boundingBox:h}=this;if(d){const{PI:r,floor:e,min:a,max:i,sin:n,cos:o}=Math,s=r/2,f=r*2,u=Math.abs(d),c=t[0]/u,p=t[2]/u,g=e((c+s)/f)!==e((p+s)/f)?-u:a(n(c)*u,n(p)*u),m=e((c-s)/f)!==e((p-s)/f)?u:i(n(c)*u,n(p)*u),G=e((c+r)/f)!==e((p+r)/f)?u*2:i(u-o(c)*u,u-o(p)*u);h.min.set(g,t[1],d<0?-G:0),h.max.set(m,t[3],d<0?0:G)}else h.min.set(t[0],t[1],0),h.max.set(t[2],t[3],0);h.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let d=this.getAttribute(sn).count,h=this._chunkedBounds;if(h)for(let r=h.length;r--;){d=h[r].end;let e=h[r].rect;if(e[1]<t.w&&e[3]>t.y&&e[0]<t.z&&e[2]>t.x)break}this.instanceCount=d}updateAttributeData(t,d,h){const r=this.getAttribute(t);d?r&&r.array.length===d.length?(r.array.set(d),r.needsUpdate=!0):(this.setAttribute(t,new Nn(d,h)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(t)}}const La=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Pa=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Ba=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Ia=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Na(l){const t=bt(l,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new jr},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Jt(0,0,0,0)},uTroikaClipRect:{value:new Jt(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new jr},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new zr},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Wn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:La,vertexTransform:Pa,fragmentDefs:Ba,fragmentColorTransform:Ia,customRewriter({vertexShader:d,fragmentShader:h}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(h)&&(h=h.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(d)||(d=d.replace(pn,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:d,fragmentShader:h}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const Tt=new jn({color:16777215,side:zn,transparent:!0}),fn=8421504,ln=new Vn,Br=new _t,ht=new _t,br=[],Wa=new _t,dt="+x+y";function un(l){return Array.isArray(l)?l[0]:l}let xn=()=>{const l=new xt(new St(1,1),Tt);return xn=()=>l,l},_n=()=>{const l=new xt(new St(1,1,32,1),Tt);return _n=()=>l,l};const ja={type:"syncstart"},za={type:"synccomplete"},Sn=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Va=Sn.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Tn=class extends xt{constructor(){const t=new Ga;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=fn,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=dt,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(ja),mn({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},d=>{this._isSyncing=!1,this._textRenderInfo=d,this.geometry.updateGlyphs(d.glyphBounds,d.glyphAtlasIndices,d.blockBounds,d.chunkedBounds,d.glyphColors);const h=this._queuedSyncs;h&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{h.forEach(r=>r&&r())})),this.dispatchEvent(za),t&&t()})))}onBeforeRender(t,d,h,r,e,a){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(t){return Na(t)}get material(){let t=this._derivedMaterial;const d=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Tt.clone());if((!t||!t.isDerivedFrom(d))&&(t=this._derivedMaterial=this.createDerivedMaterial(d),d.addEventListener("dispose",function h(){d.removeEventListener("dispose",h),t.dispose()})),this.hasOutline()){let h=t._outlineMtl;return h||(h=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),h.isTextOutlineMaterial=!0,h.depthWrite=!1,h.map=null,t.addEventListener("dispose",function r(){t.removeEventListener("dispose",r),h.dispose()})),[h,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return un(this.material).getDepthMaterial()}set customDepthMaterial(t){}get customDistanceMaterial(){return un(this.material).getDistanceMaterial()}set customDistanceMaterial(t){}_prepareForRender(t){const d=t.isTextOutlineMaterial,h=t.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:i,blockBounds:n}=r;h.uTroikaSDFTexture.value=i,h.uTroikaSDFTextureSize.value.set(i.image.width,i.image.height),h.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,h.uTroikaSDFExponent.value=r.sdfExponent,h.uTroikaTotalBounds.value.fromArray(n),h.uTroikaUseGlyphColors.value=!d&&!!r.glyphColors;let o=0,s=0,f=0,u,c,p,g=0,m=0;if(d){let{outlineWidth:F,outlineOffsetX:k,outlineOffsetY:U,outlineBlur:w,outlineOpacity:O}=this;o=this._parsePercent(F)||0,s=Math.max(0,this._parsePercent(w)||0),u=O,g=this._parsePercent(k)||0,m=this._parsePercent(U)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(p=this.strokeColor,h.uTroikaStrokeColor.value.set(p??fn),c=this.strokeOpacity,c==null&&(c=1)),u=this.fillOpacity;h.uTroikaEdgeOffset.value=o,h.uTroikaPositionOffset.value.set(g,m),h.uTroikaBlurRadius.value=s,h.uTroikaStrokeWidth.value=f,h.uTroikaStrokeOpacity.value=c,h.uTroikaFillOpacity.value=u??1,h.uTroikaCurveRadius.value=this.curveRadius||0;let G=this.clipRect;if(G&&Array.isArray(G)&&G.length===4)h.uTroikaClipRect.value.fromArray(G);else{const F=(this.fontSize||.1)*100;h.uTroikaClipRect.value.set(n[0]-F,n[1]-F,n[2]+F,n[3]+F)}this.geometry.applyClipRect(h.uTroikaClipRect.value)}h.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const e=d?this.outlineColor||0:this.color;if(e==null)delete t.color;else{const i=t.hasOwnProperty("color")?t.color:t.color=new zr;(e!==i._input||typeof e=="object")&&i.set(i._input=e)}let a=this.orientation||dt;if(a!==t._orientation){let i=h.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let n=a!==dt&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(n){let[,o,s,f,u]=n;Br.set(0,0,0)[s]=o==="-"?1:-1,ht.set(0,0,0)[u]=f==="-"?-1:1,ln.lookAt(Wa,Br.cross(ht),ht),i.setFromMatrix4(ln)}else i.identity();t._orientation=a}}_parsePercent(t){if(typeof t=="string"){let d=t.match(/^(-?[\d.]+)%$/),h=d?parseFloat(d[1]):NaN;t=(isNaN(h)?0:h/100)*this.fontSize}return t}localPositionToTextCoords(t,d=new jr){d.copy(t);const h=this.curveRadius;return h&&(d.x=Math.atan2(t.x,Math.abs(h)-Math.abs(t.z))*Math.abs(h)),d}worldPositionToTextCoords(t,d=new jr){return Br.copy(t),this.localPositionToTextCoords(this.worldToLocal(Br),d)}raycast(t,d){const{textRenderInfo:h,curveRadius:r}=this;if(h){const e=h.blockBounds,a=r?_n():xn(),i=a.geometry,{position:n,uv:o}=i.attributes;for(let s=0;s<o.count;s++){let f=e[0]+o.getX(s)*(e[2]-e[0]);const u=e[1]+o.getY(s)*(e[3]-e[1]);let c=0;r&&(c=r-Math.cos(f/r)*r,f=Math.sin(f/r)*r),n.setXYZ(s,f,u,c)}i.boundingSphere=this.geometry.boundingSphere,i.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,br.length=0,a.raycast(t,br);for(let s=0;s<br.length;s++)br[s].object=this,d.push(br[s])}}copy(t){const d=this.geometry;return super.copy(t),this.geometry=d,Va.forEach(h=>{this[h]=t[h]}),this}clone(){return new this.constructor().copy(this)}};Sn.forEach(l=>{const t="_private_"+l;Object.defineProperty(Tn.prototype,l,{get(){return this[t]},set(d){d!==this[t]&&(this[t]=d,this._needsSync=!0)}})});new cn;new zr;const Ha=_e.forwardRef(({sdfGlyphSize:l=64,anchorX:t="center",anchorY:d="middle",font:h,fontSize:r=1,children:e,characters:a,onSync:i,...n},o)=>{const s=Hn(({invalidate:p})=>p),[f]=_e.useState(()=>new Tn),[u,c]=_e.useMemo(()=>{const p=[];let g="";return _e.Children.forEach(e,m=>{typeof m=="string"||typeof m=="number"?g+=m:p.push(m)}),[p,g]},[e]);return Qn(()=>new Promise(p=>Da({font:h,characters:a},p)),["troika-text",h,a]),_e.useLayoutEffect(()=>void f.sync(()=>{s(),i&&i(f)})),_e.useEffect(()=>()=>f.dispose(),[f]),_e.createElement("primitive",hn({object:f,ref:o,font:h,text:c,anchorX:t,anchorY:d,fontSize:r,sdfGlyphSize:l},n),u)});function Xa(l,t){const d=l+"Geometry";return _e.forwardRef(({args:h,children:r,...e},a)=>{const i=_e.useRef(null);return _e.useImperativeHandle(a,()=>i.current),_e.useLayoutEffect(()=>void(t==null?void 0:t(i.current))),_e.createElement("mesh",hn({ref:i},e),_e.createElement(d,{attach:"geometry",args:h}),r)})}const kn=Xa("sphere"),Ya=_e.forwardRef(({children:l,enabled:t=!0,speed:d=1,rotationIntensity:h=1,floatIntensity:r=1,floatingRange:e=[-.1,.1],autoInvalidate:a=!1,...i},n)=>{const o=_e.useRef(null);_e.useImperativeHandle(n,()=>o.current,[]);const s=_e.useRef(Math.random()*1e4);return _r(f=>{var u,c;if(!t||d===0)return;a&&f.invalidate();const p=s.current+f.clock.elapsedTime;o.current.rotation.x=Math.cos(p/4*d)/8*h,o.current.rotation.y=Math.sin(p/4*d)/8*h,o.current.rotation.z=Math.sin(p/4*d)/20*h;let g=Math.sin(p/4*d)/10;g=gt.mapLinear(g,-.1,.1,(u=e==null?void 0:e[0])!==null&&u!==void 0?u:-.1,(c=e==null?void 0:e[1])!==null&&c!==void 0?c:.1),o.current.position.y=g*r,o.current.updateMatrix()}),_e.createElement("group",i,_e.createElement("group",{ref:o,matrixAutoUpdate:!1},l))}),vt=[["React","Node","JS","Python","SQL"],["AWS","Docker","Git","MongoDB","Express"],["Cloud","API","TDD","Web","Security"]],Wr=["#40e0d0","#7b68ee","#8f5cff"],Ja=()=>{const l=_e.useRef();return _r(t=>{if(l.current){const d=t.clock.getElapsedTime()*.1;l.current.rotation.x=Math.sin(d)*.3,l.current.rotation.y=Math.cos(d)*.2}}),Me.jsx("group",{ref:l,children:[1.5,2.5,3.5].map((t,d)=>Me.jsxs("mesh",{rotation:[Math.PI/(d+2),0,0],children:[Me.jsx("torusGeometry",{args:[t,.02,16,100]}),Me.jsx("meshBasicMaterial",{color:Wr[d],transparent:!0,opacity:.3})]},d))})},Ka=()=>{const l=_e.useRef();return _r(t=>{const d=t.clock.getElapsedTime();l.current.scale.x=Math.sin(d/2)*.05+1,l.current.scale.y=Math.sin(d/2)*.05+1,l.current.scale.z=Math.sin(d/2)*.05+1}),Me.jsx(kn,{ref:l,args:[.7,32,32],position:[0,0,0],children:Me.jsx("meshPhongMaterial",{color:"#40e0d0",emissive:"#40e0d0",emissiveIntensity:.5,metalness:.8,roughness:.2})})},pt=({radius:l,items:t,color:d,speed:h,textRef:r})=>{const e=_e.useRef(),a=_e.useRef([]);return _e.useEffect(()=>{a.current=Array(t.length).fill().map(()=>Xn.createRef())},[t.length]),_r(i=>{e.current&&(e.current.rotation.y+=.002*h),a.current.forEach(n=>{n.current&&n.current.lookAt(i.camera.position)})}),Me.jsx("group",{ref:e,children:t.map((i,n)=>{const o=n/t.length*Math.PI*2,s=Math.cos(o)*l,f=Math.sin(o)*l;return Me.jsxs("group",{position:[s,0,f],children:[Me.jsx(kn,{args:[.2,16,16],children:Me.jsx("meshStandardMaterial",{color:d})}),Me.jsx(Ha,{ref:u=>a.current[n]=u,position:[0,.35,0],fontSize:.2,color:d,anchorX:"center",anchorY:"middle",outlineWidth:.01,outlineColor:"#111827",children:i})]},n)})})},qa=({interactive:l=!0})=>{const t=_e.useRef(),[d,h]=_e.useState(!1),[r,e]=_e.useState(!0),a=_e.useRef(),i=()=>h(!0),n=()=>h(!1),o=()=>e(!r);return _r((s,f)=>{t.current&&(r&&(t.current.rotation.y+=f*.1),d&&l?t.current.rotation.x=gt.lerp(t.current.rotation.x,-.3,.1):t.current.rotation.x=gt.lerp(t.current.rotation.x,0,.1))}),Me.jsx(Ya,{speed:1.5,rotationIntensity:.2,floatIntensity:.3,floatingRange:[-.05,.05],children:Me.jsxs("group",{ref:t,onPointerOver:l?i:void 0,onPointerOut:l?n:void 0,onClick:l?o:void 0,position:[0,0,0],scale:[.8,.8,.8],children:[Me.jsx(Ka,{}),Me.jsx(Ja,{}),Me.jsx(pt,{radius:1.5,items:vt[0],color:Wr[0],speed:1.5,textRef:a}),Me.jsx(pt,{radius:2.5,items:vt[1],color:Wr[1],speed:1,textRef:a}),Me.jsx(pt,{radius:3.5,items:vt[2],color:Wr[2],speed:.7,textRef:a})]})})};export{qa as default};
//# sourceMappingURL=TechOrbit3D-d89b3db5.js.map
